<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-matlab/matlab6" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/18/matlab/matlab6/" class="article-date">
  <time class="dt-published" datetime="2021-07-18T13:49:37.000Z" itemprop="datePublished">2021-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/">数学建模</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/18/matlab/matlab6/">Matlab案例分析</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="目录"><a href="#目录" class="headerlink" title="[目录]"></a>[目录]</h2><ul>
<li><a href="#1">找出10万以内的所有亲和数</a></li>
<li><a href="#2">编写猜数字游戏</a></li>
<li><a href="#3">钻井问题</a></li>
<li><a href="#4">BP网络预测</a></li>
<li><a href="#5">M&#x2F;M&#x2F;1排队问题</a></li>
<li><a href="#6">利用相关系数修复碎纸条</a></li>
<li><a href="#7">多元统计分析</a></li>
<li><a href="#8">主成分回归估计</a></li>
</ul>
<h2 id="一、-找出10万以内的所有亲和数"><a href="#一、-找出10万以内的所有亲和数" class="headerlink" title="一、  找出10万以内的所有亲和数"></a>一、  找出10万以内的所有亲和数</h2><h2 id="1"></h2>

<h3 id="1-1-题目介绍"><a href="#1-1-题目介绍" class="headerlink" title="1.1  题目介绍"></a>1.1  题目介绍</h3><p>&amp;emsp;&amp;emsp;亲和数是这样一对正整数a和b，使得a的所有真因子的和等于b，而b的所有真因子的和等于a。亲和数问题最早由毕达哥拉斯学派发现和研究的。他们在研究数字的规律的时候发现有以下的性点的两个数：</p>
<br>

<center>

<p>$1+2+4+71+142&#x3D;220$</p>
</center>

<br>

<center>

<p>$1+2+4+5+10+11+20+22+44+55+110&#x3D;284$ </p>
</center>

<br>

<p>&amp;emsp;&amp;emsp;就是220的真因子是$1、2、4、5、10、11、20、22、44、55、110$，它们的和是$284；284$的真因子是$1、2、4、71、142$,其和恰好是$220$。这是最早发现的一对亲和数，也是最小的一对亲和数。</p>
<p>考虑到1是每个整数的因子，把除去整数本身之外的所有因子叫做这个数的“真因子”。如果两个整数，其中每一个数的真因子的和都恰好等于另一个数，那么这两个数，就构成一对“亲和数”。</p>
<br>

<h3 id="1-2-程序"><a href="#1-2-程序" class="headerlink" title="1.2  程序"></a>1.2  程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">%寻找100000以内的亲和数对</span><br><span class="line">clc</span><br><span class="line">E=[];</span><br><span class="line">for j=1:100000;   </span><br><span class="line">    T=tuo1(j);</span><br><span class="line">    M=tuo1(tuo1(j));</span><br><span class="line">    if j==tuo1(tuo1(j)) &amp;&amp; M~=T</span><br><span class="line">        C=[M,T];</span><br><span class="line">        E=[E;C];</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line">F=E(1:2:end,:)</span><br><span class="line"></span><br><span class="line">function T= tuo1(a)%函数1，寻找数的所用因数</span><br><span class="line">    A=[];</span><br><span class="line">    for i=1:100000</span><br><span class="line">        if (mod(a,i)==0)</span><br><span class="line">            A=[A,i];</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    T=sum(A)-a;</span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<br>

<h3 id="1-3-结果"><a href="#1-3-结果" class="headerlink" title="1.3  结果"></a>1.3  结果</h3><center><img src="/images/matlab/6/6-1.png" width="60%" height="60%" align=center /></center>

<br>

<br>

<h2 id="2"></h2>

<h2 id="二、编写猜数字游戏"><a href="#二、编写猜数字游戏" class="headerlink" title="二、编写猜数字游戏"></a>二、编写猜数字游戏</h2><h3 id="2-1-题目介绍"><a href="#2-1-题目介绍" class="headerlink" title="2.1  题目介绍"></a>2.1  题目介绍</h3><p>编写程序实现猜数字游戏 游戏说明：</p>
<p>计算机随机生成一个4位数（4个数字互不相同）然后玩家输入一个4位数，计算机提示（？A？B）:</p>
<p>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;A 的含义是数字位置正确的有多少个?</p>
<p>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;B 的意思是仅数字正确的 有多少个?</p>
<p>如计算机随机产生的为1234，玩家输入1325，则返回1A2B （数字1位置正确， 而2和3仅数字正确，位置不对），程序在4A或玩家猜测<code>10</code>次时结束。 </p>
<br>

<h3 id="2-2-程序"><a href="#2-2-程序" class="headerlink" title="2.2  程序"></a>2.2  程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">format </span><br><span class="line">disp(&#x27;猜数字开始了，现在已经产生了一个四位随机数&#x27;)</span><br><span class="line">X=randperm(9);</span><br><span class="line">a1=X(1);</span><br><span class="line">b1=X(2);</span><br><span class="line">c1=X(3);</span><br><span class="line">d1=X(4);</span><br><span class="line">t=10;</span><br><span class="line"></span><br><span class="line">while i~=4 &amp;&amp; t&gt;0</span><br><span class="line">    M=input(&#x27;请输入一个四位数：&#x27;)</span><br><span class="line"></span><br><span class="line">    a2=fix(M/1000);</span><br><span class="line">    b2=fix((M-1000*a2)/100);</span><br><span class="line">    c2=fix(M/10)-100*a2-10*b2;</span><br><span class="line">    d2=M-1000*a2-100*b2-10*c2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    i=0;%数字位置全对</span><br><span class="line">    j=0;%仅数字对</span><br><span class="line"></span><br><span class="line">    if a1==a2 </span><br><span class="line">        i=i+1;</span><br><span class="line">    end</span><br><span class="line">    if b1==b2 </span><br><span class="line">        i=i+1;</span><br><span class="line">    end</span><br><span class="line">    if c1==c2 </span><br><span class="line">        i=i+1;</span><br><span class="line">    end</span><br><span class="line">    if d1==d2 </span><br><span class="line">        i=i+1;</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    if a1==b2 ||a1==c2 ||a1==d2</span><br><span class="line">        j=j+1;</span><br><span class="line">    end</span><br><span class="line">    if b1==a2 ||b1==c2 ||b1==d2</span><br><span class="line">        j=j+1;</span><br><span class="line">    end</span><br><span class="line">    if c1==a2 ||c1==b2 ||c1==d2</span><br><span class="line">        j=j+1;</span><br><span class="line">    end</span><br><span class="line">    if d1==a2 ||d1==b2 ||d1==c2</span><br><span class="line">        j=j+1;</span><br><span class="line">    end</span><br><span class="line">    t=t-1;</span><br><span class="line">    disp([num2str(i),&#x27;A&#x27;,num2str(j),&#x27;B&#x27;])</span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>

<h3 id="2-3-结果"><a href="#2-3-结果" class="headerlink" title="2.3  结果"></a>2.3  结果</h3><center><img src="/images/matlab/6/6-3.png" width="100%" height="100%" align=center /></center>


<br>

<br>

<h2 id="3"></h2>

<h2 id="三、钻井问题"><a href="#三、钻井问题" class="headerlink" title="三、钻井问题"></a>三、钻井问题</h2><h3 id="3-1-题目介绍"><a href="#3-1-题目介绍" class="headerlink" title="3.1  题目介绍"></a>3.1  题目介绍</h3><p>&amp;emsp;&amp;emsp;试编写程序计算经过怎样的坐标平移旋转，可以使得这些点横纵坐标小数部分都小于0.05 的数目达到最大。</p>
<p>十五口井的坐标如下：</p>
<p>$(0.5,2)|(1.41,3.5)|(3,1.5)|(3.37,3.51)|(3.4,5.5)|(4.72,2)|(4.72,6.24)|(5.34,4.10)$  </p>
<p>$(7.57,2.01)|(8.38,4.50)|(8.98,3.41)|(9.5,0.8)|(9.57,1.2)|(9.58,1.58)|(9.58,8.05)$</p>
<br>

<h3 id="3-2-程序"><a href="#3-2-程序" class="headerlink" title="3.2  程序"></a>3.2  程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">format </span><br><span class="line">t=-1;</span><br><span class="line">G=[];</span><br><span class="line"></span><br><span class="line">for t=1:100000</span><br><span class="line">    t=t+1</span><br><span class="line">    T=tuo1(t);</span><br><span class="line">    G=([G;T]);</span><br><span class="line">end</span><br><span class="line">G;</span><br><span class="line">H=find(G(:,4)&gt;=6)</span><br><span class="line">J=G(H(1:end),:)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function T=tuo1(t)</span><br><span class="line">b=-1;</span><br><span class="line">N=[];</span><br><span class="line">E=[];</span><br><span class="line">%montecarlo随机取点</span><br><span class="line">% i\j  :蒙特卡洛取得随机点，代替坐标原点</span><br><span class="line">i=10*rand(1);</span><br><span class="line">j=9*rand(1);</span><br><span class="line"></span><br><span class="line">% X1/Y1：相对于原坐标井的位置  </span><br><span class="line">X1=[0.5 1.41 3.00 3.37 3.4 4.72 4.72 5.43 7.57 8.38 8.98 9.50 9.57 9.58 9.58];</span><br><span class="line">Y1=[2 3.5 1.5 3.51 5.5 2 6.24 4.1 2.01 4.5 3.41 0.8 1.2 1.58 8.05];</span><br><span class="line"></span><br><span class="line">% X2/Y2:X1/Y1减去i/j后的相对位置</span><br><span class="line">X2=X1-i;</span><br><span class="line">Y2=Y1-j;</span><br><span class="line"></span><br><span class="line">% a  :各点到相对原点的距离</span><br><span class="line">% A  ：各点相对相对原点的角度</span><br><span class="line">a=sqrt(X2.^2+Y2.^2);</span><br><span class="line">A=atand(Y2./X2);</span><br><span class="line"></span><br><span class="line">% B  :产生0-90的角度偏移</span><br><span class="line">for B=0:90</span><br><span class="line">    b=b+1;</span><br><span class="line">    </span><br><span class="line">    n=0;</span><br><span class="line">    for m=1:15</span><br><span class="line">        </span><br><span class="line">        X3=a.*cosd(A-B);</span><br><span class="line">        Y3=a.*sind(A-B);</span><br><span class="line">        [X3;Y3];</span><br><span class="line">        X=abs(X3-fix(X3));</span><br><span class="line">        Y=abs(Y3-fix(Y3));</span><br><span class="line"></span><br><span class="line">        if X(m)&lt;0.05 &amp;&amp; Y(m)&lt;0.05</span><br><span class="line">            n=n+1;</span><br><span class="line">        end</span><br><span class="line">        N=[N,n];</span><br><span class="line">    end</span><br><span class="line">    N=max(N);</span><br><span class="line">    e=[i,j,B,N];</span><br><span class="line">    E=[E;e];   </span><br><span class="line">end</span><br><span class="line">T=E;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<br>

<h3 id="3-3-结果"><a href="#3-3-结果" class="headerlink" title="3.3  结果"></a>3.3  结果</h3><center><img src="/images/matlab/6/6-5.png" width="70%" height="70%" align=center /></center>


<br>

<br>

<h2 id="4"></h2> 

<h2 id="四、利用BP神经网络预测上海市2009年6月的入境旅游人数"><a href="#四、利用BP神经网络预测上海市2009年6月的入境旅游人数" class="headerlink" title="四、利用BP神经网络预测上海市2009年6月的入境旅游人数"></a>四、利用BP神经网络预测上海市2009年6月的入境旅游人数</h2><h3 id="4-1-题目介绍"><a href="#4-1-题目介绍" class="headerlink" title="4.1  题目介绍"></a>4.1  题目介绍</h3><p>&amp;emsp;&amp;emsp;说明：以2008年1月到2009年4 月的数据为输入，2008年2 月到2009年5月的数据为输出，训练模型，最终依靠训练出的模型预测2009年6月的旅游人数。 </p>
<table>
<thead>
<tr>
<th align="center">时间</th>
<th align="center">人数</th>
<th align="center">时间</th>
<th align="center">人数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">2008-1</td>
<td align="center">517640</td>
<td align="center">2008-10</td>
<td align="center">627675</td>
</tr>
<tr>
<td align="center">2008-2</td>
<td align="center">528780</td>
<td align="center">2008-11</td>
<td align="center">599271</td>
</tr>
<tr>
<td align="center">2008-3</td>
<td align="center">576064</td>
<td align="center">2008-12</td>
<td align="center">419753</td>
</tr>
<tr>
<td align="center">2008-4</td>
<td align="center">575336</td>
<td align="center">2009-1</td>
<td align="center">414747</td>
</tr>
<tr>
<td align="center">2008-5</td>
<td align="center">556293</td>
<td align="center">2009-2</td>
<td align="center">468685</td>
</tr>
<tr>
<td align="center">2008-6</td>
<td align="center">503906</td>
<td align="center">2009-3</td>
<td align="center">510617</td>
</tr>
<tr>
<td align="center">2008-7</td>
<td align="center">510391</td>
<td align="center">2009-4</td>
<td align="center">549291</td>
</tr>
<tr>
<td align="center">2008-8</td>
<td align="center">483831</td>
<td align="center">2009-5</td>
<td align="center">490005</td>
</tr>
<tr>
<td align="center">2008-9</td>
<td align="center">504473</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<br>

<h3 id="4-2-程序"><a href="#4-2-程序" class="headerlink" title="4.2  程序"></a>4.2  程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">format bank</span><br><span class="line">% 读取、处理数据数据</span><br><span class="line">A=[517640 528780 576064 575336 556293 503906 510391 483831 504473 627675 599271 419753 414747 468685 510617 549291 490005];</span><br><span class="line">p1=[A(1:4);A(2:5);A(3:6);A(4:7);A(5:8);A(6:9);A(7:10);A(8:11);A(9:12);A(10:13);A(11:14);A(12:15);A(13:16)]&#x27;</span><br><span class="line">t1=[A(5:17)]</span><br><span class="line">[P,minp,maxp,T,mint,maxt]=premnmx(p1,t1);</span><br><span class="line"></span><br><span class="line">%迭代学习</span><br><span class="line">net=newff(minmax(P),[12,5,1],&#123;&#x27;tansig&#x27;,&#x27;tansig&#x27;,&#x27;purelin&#x27;&#125;,&#x27;traingdm&#x27;)</span><br><span class="line">net.trainParam.epochs=1000000;</span><br><span class="line">net.trainParam.goal=0.00001</span><br><span class="line">net.trainParam.lr=0.01;</span><br><span class="line">[net,tr]=train(net,P,T)</span><br><span class="line"></span><br><span class="line">%反向预测</span><br><span class="line">y=sim(net,P)</span><br><span class="line">Y=postmnmx(y,mint,maxt)</span><br><span class="line">t=1:13;</span><br><span class="line">plot(t,t1,&#x27;r*&#x27;,t,Y,&#x27;bo&#x27;);</span><br><span class="line">title(&#x27;入境人数实际值与预测值对比&#x27;)</span><br><span class="line">legend(&#x27;真实值&#x27;,&#x27;预测值&#x27;)</span><br><span class="line">B=[t;t1;Y]&#x27;</span><br><span class="line"></span><br><span class="line">%展开预测2009年6月的数据</span><br><span class="line">c=A(14:17);</span><br><span class="line">c1=premnmx(c);</span><br><span class="line">c2=c1&#x27;;</span><br><span class="line">C1=sim(net,c2);</span><br><span class="line">C=postmnmx(C1,mint,maxt);</span><br><span class="line">disp([&#x27;经过多次迭代，预测2009年6月份入境旅游人数为：&#x27;,num2str(C)])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>

<h3 id="4-3-结果"><a href="#4-3-结果" class="headerlink" title="4.3  结果"></a>4.3  结果</h3><center><img src="/images/matlab/6/6-7.png" width="100%" height="100%" align=center /></center>


<br>

<br>

<h2 id="5"></h2> 

<h2 id="五、-M-x2F-M-x2F-1-问题"><a href="#五、-M-x2F-M-x2F-1-问题" class="headerlink" title="五、 M&#x2F;M&#x2F;1 问题"></a>五、 M&#x2F;M&#x2F;1 问题</h2><h3 id="5-1-题目介绍"><a href="#5-1-题目介绍" class="headerlink" title="5.1  题目介绍"></a>5.1  题目介绍</h3><p>&amp;emsp;&amp;emsp;随机模拟问题：考虑一个简单的排队系统$M&#x2F;M&#x2F;1$，具体理论可参看《算法大全》中排队论模型一章，设顾客到达服务窗口的规律服从参数为 $\lambda$ 的泊松分布（等价于两个顾客之间的间隔时间服从均值为 $\frac{1}{\lambda}$ 的指数分布，又称参数为 $\lambda$ 的负指数分布，密度函数为：</p>
<center>

<p>$f(x)&#x3D;\begin{cases} \lambda e^{-\lambda x} &amp; \text{x&gt;0} \ 0 &amp; \text{else}\end{cases}$</p>
</center>

<p>其中，其数学期望$EX&#x3D;\frac{1}{\lambda}$</p>
<p>（注：一般来说，到达服务窗口的顾客流是一个泊松流，即在$(0,t)$时间间隔内，到达服务窗口的顾客人数服从参数为 $\lambda t$ 的 泊松分布，我们知道，该泊松分布的数学期望为 $\lambda t$ ；该泊松流等价于任意相邻两个顾客到达的间隔时间服从参数为 $\lambda$ 的负指数分布。比如，若 $\lambda&#x3D;5$ ，表示单位时间内平均（数学期望）有 $5$  个顾客到达窗口，等价于任意相邻两个顾客到达的间隔时间为$\frac{1}{5}$ ）。  </p>
<p>&amp;emsp;&amp;emsp;每个顾客在窗口接受服务的时间服从参数为 $\mu$ 的负指数分布，试在以下两种情况下作随机模拟：  </p>
<p>1）$\lambda&#x3D;5$ 人&#x2F;分钟，$\mu&#x3D;6$ 人&#x2F;分钟；  </p>
<p>2） $\lambda&#x3D;\mu&#x3D;5$人&#x2F;分钟。  </p>
<p>&amp;emsp;&amp;emsp;（Matlab中指数分布随机数生成函数为$exprnd(mu)$，其中$mu$为数学期望值 ，可以模拟很长一段时间排队系统的工作状况，比如取 $T&#x3D;5000$分钟，进而得到系统的以下参数的模拟值：</p>
<p>1）队长：指排队系统中等待服务的顾客人数的平均值。</p>
<p>2）逗留时间：指一个顾客在排队系统中的平均停留时间。</p>
<p>3）忙期：指从顾客到达空闲服务机构起，到服务机构再次为空闲止这段时间的平均长度。</p>
<p>请将模拟值与理论值比较一下。</p>
<br>

<h3 id="5-2-程序"><a href="#5-2-程序" class="headerlink" title="5.2  程序"></a>5.2  程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">%% 计算模块</span><br><span class="line"> clear</span><br><span class="line"></span><br><span class="line"> tic</span><br><span class="line"> N=0;</span><br><span class="line"> Tim=0;</span><br><span class="line"> J=1;</span><br><span class="line"> t=5000;</span><br><span class="line"> lamda=5;</span><br><span class="line"> mu=6;</span><br><span class="line"></span><br><span class="line"> for j=1:J</span><br><span class="line">     [nn,tim]=tuo(j)</span><br><span class="line">     Tim=Tim+tim;</span><br><span class="line">     N=N+nn;</span><br><span class="line"> end</span><br><span class="line"> N=N/J;</span><br><span class="line"> Tim=Tim/J;</span><br><span class="line"> Jj=lamda/(mu*(mu-lamda))+1/mu;</span><br><span class="line"> disp(&#x27;当lamda=5,mu=6时：&#x27;)</span><br><span class="line"> disp([&#x27;每次模拟时间为5000min,经过&#x27;,num2str(J),&#x27;次模拟，得到如下平均结果：&#x27;])</span><br><span class="line"> disp([&#x27;平均服务的客户人数：Lq=&#x27;,num2str(N)])</span><br><span class="line"> disp([&#x27;客户平均逗留时间及平均逗留忙期：Ws &amp; B=&#x27;,num2str(Tim)])</span><br><span class="line"> disp(&#x27;******************分界线******************&#x27;)</span><br><span class="line"> disp(&#x27;理论结果如下：&#x27;)</span><br><span class="line"> disp([&#x27;平均服务的客户人数：Lq`=&#x27;,num2str((lamda)^2/(mu*(mu-lamda)))])</span><br><span class="line"> disp([&#x27;客户的平均逗留时间及平均服务忙期：Ws` &amp; B`=&#x27;,&#x27;num2str(Jj)&#x27;])</span><br><span class="line"> disp(&#x27;******************分界线******************&#x27;)</span><br><span class="line"> toc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> %% 函数模块</span><br><span class="line"> function [nn,tim]=tuo(t)</span><br><span class="line">     t=5000;</span><br><span class="line">     lamda=5;</span><br><span class="line">     mu=6;</span><br><span class="line">     i=1;</span><br><span class="line">     w=0;</span><br><span class="line">     e0=0;c0=0;</span><br><span class="line">     x(1)=exprnd(1/lamda);</span><br><span class="line">     c(1)=c0+x(1);</span><br><span class="line">     b(1)=c(1);</span><br><span class="line">     while b(i)&lt;=1</span><br><span class="line">         y(i)=exprnd(1/lamda);</span><br><span class="line">         e(i)=b(i)+y(i);</span><br><span class="line">         wait(i)=b(i)+y(i);</span><br><span class="line">         w=w+wait(i);</span><br><span class="line">         i=i+1;</span><br><span class="line">         x(i)=exprnd(1/lamda);</span><br><span class="line">         c(i)=c(i-1)+x(i);</span><br><span class="line">         b(i)=max(c(i),e(i-1));</span><br><span class="line">     end</span><br><span class="line">     n=i-1;</span><br><span class="line">     nn=n/t;</span><br><span class="line">     tim=w/n;</span><br><span class="line"> end</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<br>

<h3 id="5-3-结果"><a href="#5-3-结果" class="headerlink" title="5.3  结果"></a>5.3  结果</h3><center><img src="/images/matlab/6/6-9.png" width="100%" height="100%" align=center /></center>


<br>

<br>

<h2 id="6"></h2> 

<h2 id="六、利用相关系数修复碎纸条"><a href="#六、利用相关系数修复碎纸条" class="headerlink" title="六、利用相关系数修复碎纸条"></a>六、利用相关系数修复碎纸条</h2><h3 id="6-1-题目说明"><a href="#6-1-题目说明" class="headerlink" title="6.1  题目说明"></a>6.1  题目说明</h3><p>&amp;emsp;&amp;emsp;将一张写满内容A4纸平均分成19份，随机打乱顺序后尝试拼接完整。</p>
<p>由于第I片的右侧和第I+1片的左侧存在相关性，故可以通过求取相关系数得出联系！  </p>
<center>

<p>$\rho_{xy}&#x3D;\frac{cov(X,Y)}{\sqrt{D(X)}\sqrt{D(Y)}}&#x3D;\frac{E((X-EX)(Y-EY))}{\sqrt{D(X)\sqrt{D(Y)}}}&#x3D;\frac{EXY-EX·EY}{\sqrt{D(X)}\sqrt{D(Y)}}$  </p>
<br>

<p>$r&#x3D;\frac{\sum_{i&#x3D;1}^n(x_i-\bar x(y_i-\bar y))}{\sqrt{\sum_{i&#x3D;1}^n(x_i-\bar x)^2}\sum_{i&#x3D;1}^n(y_i-\bar y)^2}$</p>
</center>

<br>

<h2 id="6-2-程序"><a href="#6-2-程序" class="headerlink" title="6.2  程序"></a>6.2  程序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%% 函数准备</span><br><span class="line">a1=imread(&#x27;000.bmp&#x27;);</span><br><span class="line">[m,n]=size(a1);</span><br><span class="line">dirname = &#x27;ImageChips&#x27;;</span><br><span class="line">files = dir(fullfile(dirname, &#x27;*.bmp&#x27;));</span><br><span class="line">a=zeros(m,n,19);</span><br><span class="line">pic=[];</span><br><span class="line"></span><br><span class="line">%% 算第一张纸条</span><br><span class="line">E=[1];</span><br><span class="line">F=[1:19];</span><br><span class="line">for j=1:19</span><br><span class="line">    e=tuo(j);</span><br><span class="line">    E=[E,e];</span><br><span class="line">end</span><br><span class="line">f1 = intersect(E,F);</span><br><span class="line">f=setdiff(F,f1);</span><br><span class="line">disp([&#x27;利用相关系数，得出&#x27;,num2str(f),&#x27;张纸片左侧与其他纸片右侧关系最小&#x27;])</span><br><span class="line"></span><br><span class="line">%% 调用函数，测算结果</span><br><span class="line">c=0;</span><br><span class="line">TT=[9];</span><br><span class="line">j=9;</span><br><span class="line">D=[];</span><br><span class="line">for c=1:18</span><br><span class="line">    T=tuo(j);</span><br><span class="line">    TT=[TT,T];</span><br><span class="line">    j=T;</span><br><span class="line">    T=tuo(j);</span><br><span class="line">    c=c+1;</span><br><span class="line">end</span><br><span class="line">disp(&#x27;纸片按照现行顺序，排列如下所示：&#x27;)</span><br><span class="line">TT</span><br><span class="line">for ii = 1:length(files)</span><br><span class="line">filename = fullfile(dirname, files(TT(ii)).name);</span><br><span class="line">a(:,:,TT(ii))=imread(filename);</span><br><span class="line">pic=[pic,a(:,:,TT(ii))];</span><br><span class="line">end</span><br><span class="line">%double(pic);</span><br><span class="line">figure</span><br><span class="line">imshow(pic,[])</span><br><span class="line"></span><br><span class="line">%% 排序函数</span><br><span class="line">function T=tuo(j)</span><br><span class="line">    a1=imread(&#x27;000.bmp&#x27;);</span><br><span class="line">    [m,n]=size(a1);</span><br><span class="line">    %imshow(a1);%显示图像</span><br><span class="line">    %image(a1);</span><br><span class="line"></span><br><span class="line">    dirname = &#x27;ImageChips&#x27;;</span><br><span class="line">    files = dir(fullfile(dirname, &#x27;*.bmp&#x27;));</span><br><span class="line">    a=zeros(m,n,19);</span><br><span class="line">    pic=[];</span><br><span class="line">    for ii = 1:length(files)</span><br><span class="line">    filename = fullfile(dirname, files(ii).name);</span><br><span class="line">    a(:,:,ii)=imread(filename);</span><br><span class="line">    pic=[pic,a(:,:,ii)];</span><br><span class="line">    end</span><br><span class="line">    %double(pic);</span><br><span class="line">    %figure</span><br><span class="line">    %imshow(pic,[])</span><br><span class="line">    a=double(a);</span><br><span class="line">    b=a./255;</span><br><span class="line">    r=[];</span><br><span class="line">    m=1;</span><br><span class="line">    RRr=[];</span><br><span class="line">    for i=1:19</span><br><span class="line">        x=b(:,72,j);</span><br><span class="line">        y=b(:,1,i);</span><br><span class="line">        r1=sum((x-mean(x)).*(y-mean(y)));</span><br><span class="line">        r2=sqrt(sum((x-mean(x)).^2))*sqrt(sum((y-mean(y)).^2));</span><br><span class="line">        r=[r;m,(r1/r2)];</span><br><span class="line">        %rr=corrcoef(x,y);%或利用库函数来求样本相关系数</span><br><span class="line">        m=m+1;</span><br><span class="line">        R=max(r(:,2));</span><br><span class="line">        Rj=r(r(:,2)==R);%已知向量某一列特殊值求向量位置</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">        RRr=[RRr;Rj];</span><br><span class="line">        T=RRr;</span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>

<h2 id="6"></h2> 

<h3 id="6-3-结果"><a href="#6-3-结果" class="headerlink" title="6.3  结果"></a>6.3  结果</h3><center><img src="/images/matlab/6/6-11.png" width="100%" height="100%" align=center /></center>


<br>

<h3 id="6-4-程序分析"><a href="#6-4-程序分析" class="headerlink" title="6.4  程序分析"></a>6.4  程序分析</h3><h4 id="6-4-1-图片及其灰度"><a href="#6-4-1-图片及其灰度" class="headerlink" title="6.4.1   图片及其灰度"></a>6.4.1   图片及其灰度</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">%% 函数准备</span><br><span class="line">a1=imread(&#x27;000.bmp&#x27;);</span><br><span class="line">[m,n]=size(a1);</span><br><span class="line">%imshow(a1);%显示图像</span><br><span class="line">%image(a1);</span><br><span class="line">dirname = &#x27;ImageChips&#x27;;</span><br><span class="line">files = dir(fullfile(dirname, &#x27;*.bmp&#x27;));</span><br><span class="line">a=zeros(m,n,19);</span><br><span class="line">pic=[];</span><br></pre></td></tr></table></figure>
<ul>
<li><code>imread</code>函数，读取图片灰度，数组 。  </li>
<li>$[m,n]$是一个取值范围在0~255之间的二维数组，记录图片灰度。  </li>
<li><code>imshow</code>展示图片灰度数组。  </li>
<li><code>image</code>将灰度向量转变为图片</li>
<li><code>dir</code> - 列出文件夹内容:(列出“dirname”这个文件夹内所有后缀为.bmp的文件)</li>
</ul>
<br>

<h4 id="6-4-2-对文件夹下的文件重命名"><a href="#6-4-2-对文件夹下的文件重命名" class="headerlink" title="6.4.2  对文件夹下的文件重命名"></a>6.4.2  对文件夹下的文件重命名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">%% 对文件夹下的文件重命名</span><br><span class="line">files = dir(&#x27;F:\Matlab\*.mat&#x27;);</span><br><span class="line">len=length(files);</span><br><span class="line">for i=1:len</span><br><span class="line">    oldname=files(i).name;</span><br><span class="line">    newname=strcat(num2str(i), &#x27;new.mat&#x27;);</span><br><span class="line">    command = [&#x27;rename&#x27; 32 oldname 32 newname];</span><br><span class="line">    status = dos(command);</span><br><span class="line">    if status == 0</span><br><span class="line">        disp([oldname, &#x27; 已被重命名为 &#x27;, newname])</span><br><span class="line">    else</span><br><span class="line">        disp([oldname, &#x27; 重命名失败!&#x27;])</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>



<br>

<br>

<h2 id="7"></h2> 

<h2 id="七、多元统计分析法"><a href="#七、多元统计分析法" class="headerlink" title="七、多元统计分析法"></a>七、多元统计分析法</h2><h3 id="7-1-题目分析"><a href="#7-1-题目分析" class="headerlink" title="7.1  题目分析"></a>7.1  题目分析</h3><p>&amp;emsp;&amp;emsp;下表是多个省市全年经济发展指标，试对其发展进行评价!</p>
<br>

<ul>
<li>版幅限制我对列表进行了转置。<table>
 <tr>
    <td>省份</td>
    <td>安徽</td>
    <td>河南</td>
    <td>湖北</td>
    <td>湖南</td>
    <td>江西</td>
    <td>山西</td>
 </tr>
 <tr>
    <td>生产总值</td>
    <td>4812.70 </td>
    <td>8815.09 </td>
    <td>6320.40 </td>
    <td>5612.26 </td>
    <td>3495.94 </td>
    <td>3000.00 </td>
 </tr>
 <tr>
    <td>第一产业</td>
    <td>932.40 </td>
    <td>1647.48 </td>
    <td>1020.09 </td>
    <td>1155.85 </td>
    <td>711.70 </td>
    <td>253.40 </td>
 </tr>
 <tr>
    <td>第二产业</td>
    <td>2169.80 </td>
    <td>4515.35 </td>
    <td>2994.67 </td>
    <td>2214.41 </td>
    <td>1595.74 </td>
    <td>1810.10 </td>
 </tr>
 <tr>
    <td>第三产业</td>
    <td>1710.50 </td>
    <td>2652.26 </td>
    <td>2305.72 </td>
    <td>2242.00 </td>
    <td>1188.50 </td>
    <td>978.90 </td>
 </tr>
 <tr>
    <td>人均总值</td>
    <td>7448.60 </td>
    <td>9071.80 </td>
    <td>10505.80 </td>
    <td>8379.40 </td>
    <td>8161.30 </td>
    <td>9024.10 </td>
 </tr>
 <tr>
    <td>粮食产量</td>
    <td>2743.00 </td>
    <td>4260.00 </td>
    <td>2100.12 </td>
    <td>2810.26 </td>
    <td>1803.40 </td>
    <td>1062.00 </td>
 </tr>
 <tr>
    <td>工业增加</td>
    <td>1736.00 </td>
    <td>3862.18 </td>
    <td>1664.73 </td>
    <td>1781.14 </td>
    <td>1110.70 </td>
    <td>1568.50 </td>
 </tr>
 <tr>
    <td>固定投资</td>
    <td>1914.20 </td>
    <td>3099.00 </td>
    <td>2356.38 </td>
    <td>1981.29 </td>
    <td>1820.00 </td>
    <td>1458.50 </td>
 </tr>
 <tr>
    <td>消费总额</td>
    <td>1503.10 </td>
    <td>2808.17 </td>
    <td>2667.48 </td>
    <td>2069.84 </td>
    <td>1059.90 </td>
    <td>884.80 </td>
 </tr>
 <tr>
    <td>进出口</td>
    <td>72.10 </td>
    <td>66.10 </td>
    <td>67.72 </td>
    <td>54.38 </td>
    <td>35.30 </td>
    <td>53.80 </td>
 </tr>
 <tr>
    <td>预算收入</td>
    <td>274.40 </td>
    <td>428.80 </td>
    <td>303.69 </td>
    <td>348.80 </td>
    <td>205.80 </td>
    <td>255.20 </td>
 </tr>
 <tr>
    <td>居民收入</td>
    <td>7511.40 </td>
    <td>7704.90 </td>
    <td>8023.00 </td>
    <td>8617.48 </td>
    <td>7560.00 </td>
    <td>7902.90 </td>
 </tr>
 <tr>
    <td>农民收入</td>
    <td>2499.30 </td>
    <td>2553.15 </td>
    <td>2897.00 </td>
    <td>2838.00 </td>
    <td>2953.00 </td>
    <td>2589.60 </td>
 </tr>
 <tr>
    <td></td>
 </tr>
</table></li>
</ul>
<br>

<h3 id="7-2-解答过程"><a href="#7-2-解答过程" class="headerlink" title="7.2  解答过程"></a>7.2  解答过程</h3><ul>
<li>Spss求解<ul>
<li>1、对其中6(m)个变量13(z)个观测值,在<code>分析-描述统计-描述</code>中进行标准化处理，形成$[m\times z]$的矩阵A；  </li>
<li>2、对标准化处理后的矩阵在<code>分析-降维-因子</code>中进行因子降维，用主成分分析法提取出特征值大于特定值的n个重要成分，形成$[z\times n]$的矩阵B；  </li>
<li>3、将矩阵$A\times B$，即$[m,z]\times[z,n]&#x3D;[m,n]$，的到成分系数与标准化参数的乘积矩阵SS;  </li>
<li>4、对第二步中的选取的n个成分系数的权重重新分配，得到$[n,1]$的权重矩阵L；</li>
<li>5、矩阵$L\times S$，即得到评价值。</li>
</ul>
</li>
</ul>
<p><img src="/images/matlab/6/6-14.png" alt="6-14"><br><img src="/images/matlab/6/6-15.png" alt="6-15"></p>
<br>

<ul>
<li>Matlab求解</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">A=xlsread(&#x27;D:\File\文档\MATLAB\暑期训练\多元统计分析\各省GDP占比权重排名\a.xlsx&#x27;,&#x27;Sheet1&#x27;,&#x27;B1:N7&#x27;)%去取数据</span><br><span class="line">[B,B_mean,B_std]=zscore(A)%对A进行标准化处理</span><br><span class="line"></span><br><span class="line">[coeff,score,latent] = pca(B);</span><br><span class="line">latent%特征值</span><br><span class="line">l=latent(latent&gt;1) %选取特征值大于一的</span><br><span class="line">L=l/sum(l)%权重矩阵</span><br><span class="line">score %成分系数与标准化参数的乘积矩阵 </span><br><span class="line">S=score(:,1:3)</span><br><span class="line">E=S(:,1)*L(1)+S(:,2)*L(2)+S(:,3)*L(3)</span><br><span class="line">G=[&quot;安徽&quot;;&quot;河南&quot;;&quot;湖北&quot;;&quot;湖南&quot;;&quot;江西&quot;;&quot;山西&quot;]</span><br><span class="line"></span><br><span class="line">disp(&#x27;各省评价得分如下所示&#x27;)</span><br><span class="line">H=[&quot;省份&quot;,&quot;得分&quot;;G,E]</span><br></pre></td></tr></table></figure>
<br>

<h3 id="6-3-结果-1"><a href="#6-3-结果-1" class="headerlink" title="6.3  结果"></a>6.3  结果</h3><p><img src="/images/matlab/6/6-12.png" alt="6-12"></p>
<p><img src="/images/matlab/6/6-13.png" alt="6-13"></p>
<br>





<br>

<br>

<h2 id="8"></h2> 

<h2 id="八、主成分回归估计"><a href="#八、主成分回归估计" class="headerlink" title="八、主成分回归估计"></a>八、主成分回归估计</h2><h3 id="8-1-题目分析"><a href="#8-1-题目分析" class="headerlink" title="8.1  题目分析"></a>8.1  题目分析</h3><p>&amp;emsp;&amp;emsp;主成分估计（principal component estimate）是Massy在1965年提出的，它是回归系数参数的一种线性有偏估计（biased estimate），同其它有偏估计，如岭估计（ridge estimate）等一样，是为了克服最小二乘（LS）估计在设计阵病态（即存在多重共线性）时表现出的不稳定性而提出的。主成分估计采用的方法是将原来的回归自变量变换到另一组变量，即主成分，选择其中一部分重要的主成分作为新的自变量（此时丢弃了一部分，影响不大的自变量，这实际达到了降维的目的），然后用最小二乘法对选取主成分后的模型参数进行估计，最后再变换回原来的模型求出参数的估计。  </p>
<p>&amp;emsp;&amp;emsp;求解水泥的影响因子与热量值之间的线性关系：</p>
<table>
   <tr>
      <td>影响因子1</td>
      <td>影响因子2</td>
      <td>影响因子3</td>
      <td>影响因子4</td>
      <td>热量值</td>
   </tr>
   <tr>
      <td>7</td>
      <td>26</td>
      <td>6</td>
      <td>60</td>
      <td>78.5</td>
   </tr>
   <tr>
      <td>1</td>
      <td>29</td>
      <td>15</td>
      <td>52</td>
      <td>74.3</td>
   </tr>
   <tr>
      <td>11</td>
      <td>56</td>
      <td>8</td>
      <td>20</td>
      <td>104.3</td>
   </tr>
   <tr>
      <td>11</td>
      <td>31</td>
      <td>8</td>
      <td>47</td>
      <td>87.6</td>
   </tr>
   <tr>
      <td>7</td>
      <td>52</td>
      <td>6</td>
      <td>33</td>
      <td>95.9</td>
   </tr>
   <tr>
      <td>11</td>
      <td>55</td>
      <td>9</td>
      <td>22</td>
      <td>109.2</td>
   </tr>
   <tr>
      <td>3</td>
      <td>71</td>
      <td>17</td>
      <td>6</td>
      <td>102.7</td>
   </tr>
   <tr>
      <td>1</td>
      <td>31</td>
      <td>22</td>
      <td>44</td>
      <td>72.5</td>
   </tr>
   <tr>
      <td>2</td>
      <td>54</td>
      <td>18</td>
      <td>22</td>
      <td>93.1</td>
   </tr>
   <tr>
      <td>21</td>
      <td>47</td>
      <td>4</td>
      <td>26</td>
      <td>115.9</td>
   </tr>
   <tr>
      <td>1</td>
      <td>40</td>
      <td>23</td>
      <td>34</td>
      <td>83.8</td>
   </tr>
   <tr>
      <td>11</td>
      <td>66</td>
      <td>9</td>
      <td>12</td>
      <td>113.3</td>
   </tr>
   <tr>
      <td>10</td>
      <td>68</td>
      <td>8</td>
      <td>12</td>
      <td>109.4</td>
   </tr>
   <tr>
      <td></td>
   </tr>
</table>

<br>

<h3 id="8-2-程序解答"><a href="#8-2-程序解答" class="headerlink" title="8.2  程序解答"></a>8.2  程序解答</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line"></span><br><span class="line">A=xlsread(&#x27;D:\File\文档\MATLAB\暑期训练\多元统计分析\对水泥性质影响因素的线性回归\水泥.xlsx&#x27;,&#x27;Sheet1&#x27;,&#x27;A2:D14&#x27;);</span><br><span class="line">B=xlsread(&#x27;D:\File\文档\MATLAB\暑期训练\多元统计分析\对水泥性质影响因素的线性回归\水泥.xlsx&#x27;,&#x27;Sheet2&#x27;,&#x27;A2:A14&#x27;);</span><br><span class="line">[C,C_mean,C_std]=zscore(A)%对A标准化处理：C为标准化处理后的值；C_mean为均值；C_std为标准方差</span><br><span class="line">[G,S,L]=pca(C);</span><br><span class="line">L=L(1:3)%取特征值的前三个</span><br><span class="line"></span><br><span class="line">%求特征向量</span><br><span class="line">d1=size(C,1);</span><br><span class="line">d=(C&#x27;*C)/(d1-1);</span><br><span class="line">D=cov(d);</span><br><span class="line">e=pcacov(D)&#x27;;%特征向量</span><br><span class="line">E=e(1:3,:)&#x27;</span><br><span class="line">F=C*E %F=S</span><br><span class="line"></span><br><span class="line">Q=E&#x27;./C_std %</span><br><span class="line"></span><br><span class="line">syms X1 X2 X3 X4 F1 F2 F3</span><br><span class="line">F1=Q(1,1)*(X1-C_mean(1))+Q(1,2)*(X2-C_mean(2))+Q(1,3)*(X3-C_mean(3))+Q(1,4)*(X4-C_mean(4));</span><br><span class="line">F2=Q(2,1)*(X1-C_mean(1))+Q(2,2)*(X2-C_mean(2))+Q(2,3)*(X3-C_mean(3))+Q(2,4)*(X4-C_mean(4));</span><br><span class="line">F3=Q(3,1)*(X1-C_mean(1))+Q(3,2)*(X2-C_mean(2))+Q(3,3)*(X3-C_mean(3))+Q(3,4)*(X4-C_mean(4));</span><br><span class="line"></span><br><span class="line">y=95.423+9.883*F1+0.125*F2+4.555*F3;</span><br><span class="line"></span><br><span class="line">Y=vpa(y,4)</span><br></pre></td></tr></table></figure>

<br>

<h3 id="8-3-结果"><a href="#8-3-结果" class="headerlink" title="8.3  结果"></a>8.3  结果</h3><p><img src="/images/matlab/6/6-16.png" alt="6-16">  </p>
<p><img src="/images/matlab/6/6-17.png" alt="6-17"></p>
<br>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/18/matlab/matlab6/" data-id="cl3qp23pj000i10qf9yew62dk" data-title="Matlab案例分析" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/matlab%E5%BA%94%E7%94%A8/" rel="tag">matlab应用</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Mathematical_modeling/matlab6" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/18/Mathematical_modeling/matlab6/" class="article-date">
  <time class="dt-published" datetime="2021-07-18T13:49:37.000Z" itemprop="datePublished">2021-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/">数学建模</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/18/Mathematical_modeling/matlab6/">Matlab案例分析</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="目录"><a href="#目录" class="headerlink" title="[目录]"></a>[目录]</h2><ul>
<li><a href="#1">找出10万以内的所有亲和数</a></li>
<li><a href="#2">编写猜数字游戏</a></li>
<li><a href="#3">钻井问题</a></li>
<li><a href="#4">BP网络预测</a></li>
<li><a href="#5">M&#x2F;M&#x2F;1排队问题</a></li>
<li><a href="#6">利用相关系数修复碎纸条</a></li>
<li><a href="#7">多元统计分析</a></li>
<li><a href="#8">主成分回归估计</a></li>
</ul>
<h2 id="一、-找出10万以内的所有亲和数"><a href="#一、-找出10万以内的所有亲和数" class="headerlink" title="一、  找出10万以内的所有亲和数"></a>一、  找出10万以内的所有亲和数</h2><h2 id="1"></h2>

<h3 id="1-1-题目介绍"><a href="#1-1-题目介绍" class="headerlink" title="1.1  题目介绍"></a>1.1  题目介绍</h3><p>&amp;emsp;&amp;emsp;亲和数是这样一对正整数a和b，使得a的所有真因子的和等于b，而b的所有真因子的和等于a。亲和数问题最早由毕达哥拉斯学派发现和研究的。他们在研究数字的规律的时候发现有以下的性点的两个数：</p>
<p>$$1+2+4+71+142&#x3D;220 \ </p>
<p>1+2+4+5+10+11+20+22+44+55+110&#x3D;284$$ </p>
<p>&amp;emsp;&amp;emsp;就是220的真因子是$1、2、4、5、10、11、20、22、44、55、110$，它们的和是$284；284$的真因子是$1、2、4、71、142$,其和恰好是$220$。这是最早发现的一对亲和数，也是最小的一对亲和数。</p>
<p>考虑到1是每个整数的因子，把除去整数本身之外的所有因子叫做这个数的“真因子”。如果两个整数，其中每一个数的真因子的和都恰好等于另一个数，那么这两个数，就构成一对“亲和数”。</p>
<br>

<h3 id="1-2-程序"><a href="#1-2-程序" class="headerlink" title="1.2  程序"></a>1.2  程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">%寻找100000以内的亲和数对</span><br><span class="line">clc</span><br><span class="line">E=[];</span><br><span class="line">for j=1:100000;   </span><br><span class="line">    T=tuo1(j);</span><br><span class="line">    M=tuo1(tuo1(j));</span><br><span class="line">    if j==tuo1(tuo1(j)) &amp;&amp; M~=T</span><br><span class="line">        C=[M,T];</span><br><span class="line">        E=[E;C];</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line">F=E(1:2:end,:)</span><br><span class="line"></span><br><span class="line">function T= tuo1(a)%函数1，寻找数的所用因数</span><br><span class="line">    A=[];</span><br><span class="line">    for i=1:100000</span><br><span class="line">        if (mod(a,i)==0)</span><br><span class="line">            A=[A,i];</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    T=sum(A)-a;</span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<br>

<h3 id="1-3-结果"><a href="#1-3-结果" class="headerlink" title="1.3  结果"></a>1.3  结果</h3><center><img src="/images/matlab/6/6-1.png" width="60%" height="60%" align=center /></center>

<br>

<br>

<h2 id="2"></h2>

<h2 id="二、编写猜数字游戏"><a href="#二、编写猜数字游戏" class="headerlink" title="二、编写猜数字游戏"></a>二、编写猜数字游戏</h2><h3 id="2-1-题目介绍"><a href="#2-1-题目介绍" class="headerlink" title="2.1  题目介绍"></a>2.1  题目介绍</h3><p>编写程序实现猜数字游戏 游戏说明：</p>
<p>计算机随机生成一个4位数（4个数字互不相同）然后玩家输入一个4位数，计算机提示（？A？B）:</p>
<p>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;A 的含义是数字位置正确的有多少个?</p>
<p>&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;B 的意思是仅数字正确的 有多少个?</p>
<p>如计算机随机产生的为1234，玩家输入1325，则返回1A2B （数字1位置正确， 而2和3仅数字正确，位置不对），程序在4A或玩家猜测<code>10</code>次时结束。 </p>
<br>

<h3 id="2-2-程序"><a href="#2-2-程序" class="headerlink" title="2.2  程序"></a>2.2  程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">format </span><br><span class="line">disp(&#x27;猜数字开始了，现在已经产生了一个四位随机数&#x27;)</span><br><span class="line">X=randperm(9);</span><br><span class="line">a1=X(1);</span><br><span class="line">b1=X(2);</span><br><span class="line">c1=X(3);</span><br><span class="line">d1=X(4);</span><br><span class="line">t=10;</span><br><span class="line"></span><br><span class="line">while i~=4 &amp;&amp; t&gt;0</span><br><span class="line">    M=input(&#x27;请输入一个四位数：&#x27;)</span><br><span class="line"></span><br><span class="line">    a2=fix(M/1000);</span><br><span class="line">    b2=fix((M-1000*a2)/100);</span><br><span class="line">    c2=fix(M/10)-100*a2-10*b2;</span><br><span class="line">    d2=M-1000*a2-100*b2-10*c2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    i=0;%数字位置全对</span><br><span class="line">    j=0;%仅数字对</span><br><span class="line"></span><br><span class="line">    if a1==a2 </span><br><span class="line">        i=i+1;</span><br><span class="line">    end</span><br><span class="line">    if b1==b2 </span><br><span class="line">        i=i+1;</span><br><span class="line">    end</span><br><span class="line">    if c1==c2 </span><br><span class="line">        i=i+1;</span><br><span class="line">    end</span><br><span class="line">    if d1==d2 </span><br><span class="line">        i=i+1;</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    if a1==b2 ||a1==c2 ||a1==d2</span><br><span class="line">        j=j+1;</span><br><span class="line">    end</span><br><span class="line">    if b1==a2 ||b1==c2 ||b1==d2</span><br><span class="line">        j=j+1;</span><br><span class="line">    end</span><br><span class="line">    if c1==a2 ||c1==b2 ||c1==d2</span><br><span class="line">        j=j+1;</span><br><span class="line">    end</span><br><span class="line">    if d1==a2 ||d1==b2 ||d1==c2</span><br><span class="line">        j=j+1;</span><br><span class="line">    end</span><br><span class="line">    t=t-1;</span><br><span class="line">    disp([num2str(i),&#x27;A&#x27;,num2str(j),&#x27;B&#x27;])</span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>

<h3 id="2-3-结果"><a href="#2-3-结果" class="headerlink" title="2.3  结果"></a>2.3  结果</h3><center><img src="/images/matlab/6/6-3.png" width="100%" height="100%" align=center /></center>


<br>

<br>

<h2 id="3"></h2>

<h2 id="三、钻井问题"><a href="#三、钻井问题" class="headerlink" title="三、钻井问题"></a>三、钻井问题</h2><h3 id="3-1-题目介绍"><a href="#3-1-题目介绍" class="headerlink" title="3.1  题目介绍"></a>3.1  题目介绍</h3><p>&amp;emsp;&amp;emsp;试编写程序计算经过怎样的坐标平移旋转，可以使得这些点横纵坐标小数部分都小于0.05 的数目达到最大。</p>
<p>十五口井的坐标如下：</p>
<p>$(0.5,2)|(1.41,3.5)|(3,1.5)|(3.37,3.51)|(3.4,5.5)|(4.72,2)|(4.72,6.24)|(5.34,4.10)$  </p>
<p>$(7.57,2.01)|(8.38,4.50)|(8.98,3.41)|(9.5,0.8)|(9.57,1.2)|(9.58,1.58)|(9.58,8.05)$</p>
<br>

<h3 id="3-2-程序"><a href="#3-2-程序" class="headerlink" title="3.2  程序"></a>3.2  程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">format </span><br><span class="line">t=-1;</span><br><span class="line">G=[];</span><br><span class="line"></span><br><span class="line">for t=1:100000</span><br><span class="line">    t=t+1</span><br><span class="line">    T=tuo1(t);</span><br><span class="line">    G=([G;T]);</span><br><span class="line">end</span><br><span class="line">G;</span><br><span class="line">H=find(G(:,4)&gt;=6)</span><br><span class="line">J=G(H(1:end),:)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function T=tuo1(t)</span><br><span class="line">b=-1;</span><br><span class="line">N=[];</span><br><span class="line">E=[];</span><br><span class="line">%montecarlo随机取点</span><br><span class="line">% i\j  :蒙特卡洛取得随机点，代替坐标原点</span><br><span class="line">i=10*rand(1);</span><br><span class="line">j=9*rand(1);</span><br><span class="line"></span><br><span class="line">% X1/Y1：相对于原坐标井的位置  </span><br><span class="line">X1=[0.5 1.41 3.00 3.37 3.4 4.72 4.72 5.43 7.57 8.38 8.98 9.50 9.57 9.58 9.58];</span><br><span class="line">Y1=[2 3.5 1.5 3.51 5.5 2 6.24 4.1 2.01 4.5 3.41 0.8 1.2 1.58 8.05];</span><br><span class="line"></span><br><span class="line">% X2/Y2:X1/Y1减去i/j后的相对位置</span><br><span class="line">X2=X1-i;</span><br><span class="line">Y2=Y1-j;</span><br><span class="line"></span><br><span class="line">% a  :各点到相对原点的距离</span><br><span class="line">% A  ：各点相对相对原点的角度</span><br><span class="line">a=sqrt(X2.^2+Y2.^2);</span><br><span class="line">A=atand(Y2./X2);</span><br><span class="line"></span><br><span class="line">% B  :产生0-90的角度偏移</span><br><span class="line">for B=0:90</span><br><span class="line">    b=b+1;</span><br><span class="line">    </span><br><span class="line">    n=0;</span><br><span class="line">    for m=1:15</span><br><span class="line">        </span><br><span class="line">        X3=a.*cosd(A-B);</span><br><span class="line">        Y3=a.*sind(A-B);</span><br><span class="line">        [X3;Y3];</span><br><span class="line">        X=abs(X3-fix(X3));</span><br><span class="line">        Y=abs(Y3-fix(Y3));</span><br><span class="line"></span><br><span class="line">        if X(m)&lt;0.05 &amp;&amp; Y(m)&lt;0.05</span><br><span class="line">            n=n+1;</span><br><span class="line">        end</span><br><span class="line">        N=[N,n];</span><br><span class="line">    end</span><br><span class="line">    N=max(N);</span><br><span class="line">    e=[i,j,B,N];</span><br><span class="line">    E=[E;e];   </span><br><span class="line">end</span><br><span class="line">T=E;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<br>

<h3 id="3-3-结果"><a href="#3-3-结果" class="headerlink" title="3.3  结果"></a>3.3  结果</h3><center><img src="/images/matlab/6/6-5.png" width="70%" height="70%" align=center /></center>


<br>

<br>

<h2 id="4"></h2> 

<h2 id="四、利用BP神经网络预测上海市2009年6月的入境旅游人数"><a href="#四、利用BP神经网络预测上海市2009年6月的入境旅游人数" class="headerlink" title="四、利用BP神经网络预测上海市2009年6月的入境旅游人数"></a>四、利用BP神经网络预测上海市2009年6月的入境旅游人数</h2><h3 id="4-1-题目介绍"><a href="#4-1-题目介绍" class="headerlink" title="4.1  题目介绍"></a>4.1  题目介绍</h3><p>&amp;emsp;&amp;emsp;说明：以2008年1月到2009年4 月的数据为输入，2008年2 月到2009年5月的数据为输出，训练模型，最终依靠训练出的模型预测2009年6月的旅游人数。 </p>
<table>
<thead>
<tr>
<th align="center">时间</th>
<th align="center">人数</th>
<th align="center">时间</th>
<th align="center">人数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">2008-1</td>
<td align="center">517640</td>
<td align="center">2008-10</td>
<td align="center">627675</td>
</tr>
<tr>
<td align="center">2008-2</td>
<td align="center">528780</td>
<td align="center">2008-11</td>
<td align="center">599271</td>
</tr>
<tr>
<td align="center">2008-3</td>
<td align="center">576064</td>
<td align="center">2008-12</td>
<td align="center">419753</td>
</tr>
<tr>
<td align="center">2008-4</td>
<td align="center">575336</td>
<td align="center">2009-1</td>
<td align="center">414747</td>
</tr>
<tr>
<td align="center">2008-5</td>
<td align="center">556293</td>
<td align="center">2009-2</td>
<td align="center">468685</td>
</tr>
<tr>
<td align="center">2008-6</td>
<td align="center">503906</td>
<td align="center">2009-3</td>
<td align="center">510617</td>
</tr>
<tr>
<td align="center">2008-7</td>
<td align="center">510391</td>
<td align="center">2009-4</td>
<td align="center">549291</td>
</tr>
<tr>
<td align="center">2008-8</td>
<td align="center">483831</td>
<td align="center">2009-5</td>
<td align="center">490005</td>
</tr>
<tr>
<td align="center">2008-9</td>
<td align="center">504473</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<br>

<h3 id="4-2-程序"><a href="#4-2-程序" class="headerlink" title="4.2  程序"></a>4.2  程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">format bank</span><br><span class="line">% 读取、处理数据数据</span><br><span class="line">A=[517640 528780 576064 575336 556293 503906 510391 483831 504473 627675 599271 419753 414747 468685 510617 549291 490005];</span><br><span class="line">p1=[A(1:4);A(2:5);A(3:6);A(4:7);A(5:8);A(6:9);A(7:10);A(8:11);A(9:12);A(10:13);A(11:14);A(12:15);A(13:16)]&#x27;</span><br><span class="line">t1=[A(5:17)]</span><br><span class="line">[P,minp,maxp,T,mint,maxt]=premnmx(p1,t1);</span><br><span class="line"></span><br><span class="line">%迭代学习</span><br><span class="line">net=newff(minmax(P),[12,5,1],&#123;&#x27;tansig&#x27;,&#x27;tansig&#x27;,&#x27;purelin&#x27;&#125;,&#x27;traingdm&#x27;)</span><br><span class="line">net.trainParam.epochs=1000000;</span><br><span class="line">net.trainParam.goal=0.00001</span><br><span class="line">net.trainParam.lr=0.01;</span><br><span class="line">[net,tr]=train(net,P,T)</span><br><span class="line"></span><br><span class="line">%反向预测</span><br><span class="line">y=sim(net,P)</span><br><span class="line">Y=postmnmx(y,mint,maxt)</span><br><span class="line">t=1:13;</span><br><span class="line">plot(t,t1,&#x27;r*&#x27;,t,Y,&#x27;bo&#x27;);</span><br><span class="line">title(&#x27;入境人数实际值与预测值对比&#x27;)</span><br><span class="line">legend(&#x27;真实值&#x27;,&#x27;预测值&#x27;)</span><br><span class="line">B=[t;t1;Y]&#x27;</span><br><span class="line"></span><br><span class="line">%展开预测2009年6月的数据</span><br><span class="line">c=A(14:17);</span><br><span class="line">c1=premnmx(c);</span><br><span class="line">c2=c1&#x27;;</span><br><span class="line">C1=sim(net,c2);</span><br><span class="line">C=postmnmx(C1,mint,maxt);</span><br><span class="line">disp([&#x27;经过多次迭代，预测2009年6月份入境旅游人数为：&#x27;,num2str(C)])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>

<h3 id="4-3-结果"><a href="#4-3-结果" class="headerlink" title="4.3  结果"></a>4.3  结果</h3><center><img src="/images/matlab/6/6-7.png" width="100%" height="100%" align=center /></center>


<br>

<br>

<h2 id="5"></h2> 

<h2 id="五、-M-x2F-M-x2F-1-问题"><a href="#五、-M-x2F-M-x2F-1-问题" class="headerlink" title="五、 M&#x2F;M&#x2F;1 问题"></a>五、 M&#x2F;M&#x2F;1 问题</h2><h3 id="5-1-题目介绍"><a href="#5-1-题目介绍" class="headerlink" title="5.1  题目介绍"></a>5.1  题目介绍</h3><p>&amp;emsp;&amp;emsp;随机模拟问题：考虑一个简单的排队系统$M&#x2F;M&#x2F;1$，具体理论可参看《算法大全》中排队论模型一章，设顾客到达服务窗口的规律服从参数为 $\lambda$ 的泊松分布（等价于两个顾客之间的间隔时间服从均值为 $\frac{1}{\lambda}$ 的指数分布，又称参数为 $\lambda$ 的负指数分布，密度函数为：</p>
<p>$$<br>f(x)&#x3D;<br>\begin{cases}<br>\lambda e^{-\lambda x} &amp; \text{x&gt;0} \<br> 0 &amp; \text{else}\end{cases}<br>$$</p>
<p>其中，其数学期望$E(X)&#x3D;\frac{1}{\lambda}$</p>
<p>（注：一般来说，到达服务窗口的顾客流是一个泊松流，即在$(0,t)$时间间隔内，到达服务窗口的顾客人数服从参数为 $\lambda t$ 的 泊松分布，我们知道，该泊松分布的数学期望为 $\lambda t$ ；该泊松流等价于任意相邻两个顾客到达的间隔时间服从参数为 $\lambda$ 的负指数分布。比如，若 $\lambda&#x3D;5$ ，表示单位时间内平均（数学期望）有 $5$  个顾客到达窗口，等价于任意相邻两个顾客到达的间隔时间为$\frac{1}{5}$ ）。  </p>
<p>&amp;emsp;&amp;emsp;每个顾客在窗口接受服务的时间服从参数为 $\mu$ 的负指数分布，试在以下两种情况下作随机模拟：  </p>
<p>1）$\lambda&#x3D;5$ 人&#x2F;分钟，$\mu&#x3D;6$ 人&#x2F;分钟；  </p>
<p>2） $\lambda&#x3D;\mu&#x3D;5$人&#x2F;分钟。  </p>
<p>&amp;emsp;&amp;emsp;（Matlab中指数分布随机数生成函数为$exprnd(mu)$，其中$mu$为数学期望值 ，可以模拟很长一段时间排队系统的工作状况，比如取 $T&#x3D;5000$分钟，进而得到系统的以下参数的模拟值：</p>
<p>1）队长：指排队系统中等待服务的顾客人数的平均值。</p>
<p>2）逗留时间：指一个顾客在排队系统中的平均停留时间。</p>
<p>3）忙期：指从顾客到达空闲服务机构起，到服务机构再次为空闲止这段时间的平均长度。</p>
<p>请将模拟值与理论值比较一下。</p>
<br>

<h3 id="5-2-程序"><a href="#5-2-程序" class="headerlink" title="5.2  程序"></a>5.2  程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">%% 计算模块</span><br><span class="line"> clear</span><br><span class="line"></span><br><span class="line"> tic</span><br><span class="line"> N=0;</span><br><span class="line"> Tim=0;</span><br><span class="line"> J=1;</span><br><span class="line"> t=5000;</span><br><span class="line"> lamda=5;</span><br><span class="line"> mu=6;</span><br><span class="line"></span><br><span class="line"> for j=1:J</span><br><span class="line">     [nn,tim]=tuo(j)</span><br><span class="line">     Tim=Tim+tim;</span><br><span class="line">     N=N+nn;</span><br><span class="line"> end</span><br><span class="line"> N=N/J;</span><br><span class="line"> Tim=Tim/J;</span><br><span class="line"> Jj=lamda/(mu*(mu-lamda))+1/mu;</span><br><span class="line"> disp(&#x27;当lamda=5,mu=6时：&#x27;)</span><br><span class="line"> disp([&#x27;每次模拟时间为5000min,经过&#x27;,num2str(J),&#x27;次模拟，得到如下平均结果：&#x27;])</span><br><span class="line"> disp([&#x27;平均服务的客户人数：Lq=&#x27;,num2str(N)])</span><br><span class="line"> disp([&#x27;客户平均逗留时间及平均逗留忙期：Ws &amp; B=&#x27;,num2str(Tim)])</span><br><span class="line"> disp(&#x27;******************分界线******************&#x27;)</span><br><span class="line"> disp(&#x27;理论结果如下：&#x27;)</span><br><span class="line"> disp([&#x27;平均服务的客户人数：Lq`=&#x27;,num2str((lamda)^2/(mu*(mu-lamda)))])</span><br><span class="line"> disp([&#x27;客户的平均逗留时间及平均服务忙期：Ws` &amp; B`=&#x27;,&#x27;num2str(Jj)&#x27;])</span><br><span class="line"> disp(&#x27;******************分界线******************&#x27;)</span><br><span class="line"> toc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> %% 函数模块</span><br><span class="line"> function [nn,tim]=tuo(t)</span><br><span class="line">     t=5000;</span><br><span class="line">     lamda=5;</span><br><span class="line">     mu=6;</span><br><span class="line">     i=1;</span><br><span class="line">     w=0;</span><br><span class="line">     e0=0;c0=0;</span><br><span class="line">     x(1)=exprnd(1/lamda);</span><br><span class="line">     c(1)=c0+x(1);</span><br><span class="line">     b(1)=c(1);</span><br><span class="line">     while b(i)&lt;=1</span><br><span class="line">         y(i)=exprnd(1/lamda);</span><br><span class="line">         e(i)=b(i)+y(i);</span><br><span class="line">         wait(i)=b(i)+y(i);</span><br><span class="line">         w=w+wait(i);</span><br><span class="line">         i=i+1;</span><br><span class="line">         x(i)=exprnd(1/lamda);</span><br><span class="line">         c(i)=c(i-1)+x(i);</span><br><span class="line">         b(i)=max(c(i),e(i-1));</span><br><span class="line">     end</span><br><span class="line">     n=i-1;</span><br><span class="line">     nn=n/t;</span><br><span class="line">     tim=w/n;</span><br><span class="line"> end</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<br>

<h3 id="5-3-结果"><a href="#5-3-结果" class="headerlink" title="5.3  结果"></a>5.3  结果</h3><center><img src="/images/matlab/6/6-9.png" width="100%" height="100%" align=center /></center>


<br>

<br>

<h2 id="6"></h2> 

<h2 id="六、利用相关系数修复碎纸条"><a href="#六、利用相关系数修复碎纸条" class="headerlink" title="六、利用相关系数修复碎纸条"></a>六、利用相关系数修复碎纸条</h2><h3 id="6-1-题目说明"><a href="#6-1-题目说明" class="headerlink" title="6.1  题目说明"></a>6.1  题目说明</h3><p>&amp;emsp;&amp;emsp;将一张写满内容A4纸平均分成19份，随机打乱顺序后尝试拼接完整。</p>
<p>由于第I片的右侧和第I+1片的左侧存在相关性，故可以通过求取相关系数得出联系！  </p>
<p>$$<br>\rho_{xy}&#x3D;\frac{cov(X,Y)}{\sqrt{D(X)}\sqrt{D(Y)}}&#x3D;\frac{E((X-EX)(Y-EY))}{\sqrt{D(X)\sqrt{D(Y)}}}&#x3D;\frac{EXY-EX·EY}{\sqrt{D(X)}\sqrt{D(Y)}}<br>$$  </p>
<br>

<p>$$r&#x3D;\frac{\sum_{i&#x3D;1}^n(x_i-\bar x(y_i-\bar y))}{\sqrt{\sum_{i&#x3D;1}^n(x_i-\bar x)^2}\sum_{i&#x3D;1}^n(y_i-\bar y)^2}$$</p>
<br>

<h2 id="6-2-程序"><a href="#6-2-程序" class="headerlink" title="6.2  程序"></a>6.2  程序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%% 函数准备</span><br><span class="line">a1=imread(&#x27;000.bmp&#x27;);</span><br><span class="line">[m,n]=size(a1);</span><br><span class="line">dirname = &#x27;ImageChips&#x27;;</span><br><span class="line">files = dir(fullfile(dirname, &#x27;*.bmp&#x27;));</span><br><span class="line">a=zeros(m,n,19);</span><br><span class="line">pic=[];</span><br><span class="line"></span><br><span class="line">%% 算第一张纸条</span><br><span class="line">E=[1];</span><br><span class="line">F=[1:19];</span><br><span class="line">for j=1:19</span><br><span class="line">    e=tuo(j);</span><br><span class="line">    E=[E,e];</span><br><span class="line">end</span><br><span class="line">f1 = intersect(E,F);</span><br><span class="line">f=setdiff(F,f1);</span><br><span class="line">disp([&#x27;利用相关系数，得出&#x27;,num2str(f),&#x27;张纸片左侧与其他纸片右侧关系最小&#x27;])</span><br><span class="line"></span><br><span class="line">%% 调用函数，测算结果</span><br><span class="line">c=0;</span><br><span class="line">TT=[9];</span><br><span class="line">j=9;</span><br><span class="line">D=[];</span><br><span class="line">for c=1:18</span><br><span class="line">    T=tuo(j);</span><br><span class="line">    TT=[TT,T];</span><br><span class="line">    j=T;</span><br><span class="line">    T=tuo(j);</span><br><span class="line">    c=c+1;</span><br><span class="line">end</span><br><span class="line">disp(&#x27;纸片按照现行顺序，排列如下所示：&#x27;)</span><br><span class="line">TT</span><br><span class="line">for ii = 1:length(files)</span><br><span class="line">filename = fullfile(dirname, files(TT(ii)).name);</span><br><span class="line">a(:,:,TT(ii))=imread(filename);</span><br><span class="line">pic=[pic,a(:,:,TT(ii))];</span><br><span class="line">end</span><br><span class="line">%double(pic);</span><br><span class="line">figure</span><br><span class="line">imshow(pic,[])</span><br><span class="line"></span><br><span class="line">%% 排序函数</span><br><span class="line">function T=tuo(j)</span><br><span class="line">    a1=imread(&#x27;000.bmp&#x27;);</span><br><span class="line">    [m,n]=size(a1);</span><br><span class="line">    %imshow(a1);%显示图像</span><br><span class="line">    %image(a1);</span><br><span class="line"></span><br><span class="line">    dirname = &#x27;ImageChips&#x27;;</span><br><span class="line">    files = dir(fullfile(dirname, &#x27;*.bmp&#x27;));</span><br><span class="line">    a=zeros(m,n,19);</span><br><span class="line">    pic=[];</span><br><span class="line">    for ii = 1:length(files)</span><br><span class="line">    filename = fullfile(dirname, files(ii).name);</span><br><span class="line">    a(:,:,ii)=imread(filename);</span><br><span class="line">    pic=[pic,a(:,:,ii)];</span><br><span class="line">    end</span><br><span class="line">    %double(pic);</span><br><span class="line">    %figure</span><br><span class="line">    %imshow(pic,[])</span><br><span class="line">    a=double(a);</span><br><span class="line">    b=a./255;</span><br><span class="line">    r=[];</span><br><span class="line">    m=1;</span><br><span class="line">    RRr=[];</span><br><span class="line">    for i=1:19</span><br><span class="line">        x=b(:,72,j);</span><br><span class="line">        y=b(:,1,i);</span><br><span class="line">        r1=sum((x-mean(x)).*(y-mean(y)));</span><br><span class="line">        r2=sqrt(sum((x-mean(x)).^2))*sqrt(sum((y-mean(y)).^2));</span><br><span class="line">        r=[r;m,(r1/r2)];</span><br><span class="line">        %rr=corrcoef(x,y);%或利用库函数来求样本相关系数</span><br><span class="line">        m=m+1;</span><br><span class="line">        R=max(r(:,2));</span><br><span class="line">        Rj=r(r(:,2)==R);%已知向量某一列特殊值求向量位置</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">        RRr=[RRr;Rj];</span><br><span class="line">        T=RRr;</span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>

<h2 id="6"></h2> 

<h3 id="6-3-结果"><a href="#6-3-结果" class="headerlink" title="6.3  结果"></a>6.3  结果</h3><center><img src="/images/matlab/6/6-11.png" width="100%" height="100%" align=center /></center>


<br>

<h3 id="6-4-程序分析"><a href="#6-4-程序分析" class="headerlink" title="6.4  程序分析"></a>6.4  程序分析</h3><h4 id="6-4-1-图片及其灰度"><a href="#6-4-1-图片及其灰度" class="headerlink" title="6.4.1   图片及其灰度"></a>6.4.1   图片及其灰度</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">%% 函数准备</span><br><span class="line">a1=imread(&#x27;000.bmp&#x27;);</span><br><span class="line">[m,n]=size(a1);</span><br><span class="line">%imshow(a1);%显示图像</span><br><span class="line">%image(a1);</span><br><span class="line">dirname = &#x27;ImageChips&#x27;;</span><br><span class="line">files = dir(fullfile(dirname, &#x27;*.bmp&#x27;));</span><br><span class="line">a=zeros(m,n,19);</span><br><span class="line">pic=[];</span><br></pre></td></tr></table></figure>
<ul>
<li><code>imread</code>函数，读取图片灰度，数组 。  </li>
<li>$[m,n]$是一个取值范围在0~255之间的二维数组，记录图片灰度。  </li>
<li><code>imshow</code>展示图片灰度数组。  </li>
<li><code>image</code>将灰度向量转变为图片</li>
<li><code>dir</code> - 列出文件夹内容:(列出“dirname”这个文件夹内所有后缀为.bmp的文件)</li>
</ul>
<br>

<h4 id="6-4-2-对文件夹下的文件重命名"><a href="#6-4-2-对文件夹下的文件重命名" class="headerlink" title="6.4.2  对文件夹下的文件重命名"></a>6.4.2  对文件夹下的文件重命名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">%% 对文件夹下的文件重命名</span><br><span class="line">files = dir(&#x27;F:\Matlab\*.mat&#x27;);</span><br><span class="line">len=length(files);</span><br><span class="line">for i=1:len</span><br><span class="line">    oldname=files(i).name;</span><br><span class="line">    newname=strcat(num2str(i), &#x27;new.mat&#x27;);</span><br><span class="line">    command = [&#x27;rename&#x27; 32 oldname 32 newname];</span><br><span class="line">    status = dos(command);</span><br><span class="line">    if status == 0</span><br><span class="line">        disp([oldname, &#x27; 已被重命名为 &#x27;, newname])</span><br><span class="line">    else</span><br><span class="line">        disp([oldname, &#x27; 重命名失败!&#x27;])</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>



<br>

<br>

<h2 id="7"></h2> 

<h2 id="七、多元统计分析法"><a href="#七、多元统计分析法" class="headerlink" title="七、多元统计分析法"></a>七、多元统计分析法</h2><h3 id="7-1-题目分析"><a href="#7-1-题目分析" class="headerlink" title="7.1  题目分析"></a>7.1  题目分析</h3><p>&amp;emsp;&amp;emsp;下表是多个省市全年经济发展指标，试对其发展进行评价!</p>
<br>

<ul>
<li>版幅限制我对列表进行了转置。<table>
 <tr>
    <td>省份</td>
    <td>安徽</td>
    <td>河南</td>
    <td>湖北</td>
    <td>湖南</td>
    <td>江西</td>
    <td>山西</td>
 </tr>
 <tr>
    <td>生产总值</td>
    <td>4812.70 </td>
    <td>8815.09 </td>
    <td>6320.40 </td>
    <td>5612.26 </td>
    <td>3495.94 </td>
    <td>3000.00 </td>
 </tr>
 <tr>
    <td>第一产业</td>
    <td>932.40 </td>
    <td>1647.48 </td>
    <td>1020.09 </td>
    <td>1155.85 </td>
    <td>711.70 </td>
    <td>253.40 </td>
 </tr>
 <tr>
    <td>第二产业</td>
    <td>2169.80 </td>
    <td>4515.35 </td>
    <td>2994.67 </td>
    <td>2214.41 </td>
    <td>1595.74 </td>
    <td>1810.10 </td>
 </tr>
 <tr>
    <td>第三产业</td>
    <td>1710.50 </td>
    <td>2652.26 </td>
    <td>2305.72 </td>
    <td>2242.00 </td>
    <td>1188.50 </td>
    <td>978.90 </td>
 </tr>
 <tr>
    <td>人均总值</td>
    <td>7448.60 </td>
    <td>9071.80 </td>
    <td>10505.80 </td>
    <td>8379.40 </td>
    <td>8161.30 </td>
    <td>9024.10 </td>
 </tr>
 <tr>
    <td>粮食产量</td>
    <td>2743.00 </td>
    <td>4260.00 </td>
    <td>2100.12 </td>
    <td>2810.26 </td>
    <td>1803.40 </td>
    <td>1062.00 </td>
 </tr>
 <tr>
    <td>工业增加</td>
    <td>1736.00 </td>
    <td>3862.18 </td>
    <td>1664.73 </td>
    <td>1781.14 </td>
    <td>1110.70 </td>
    <td>1568.50 </td>
 </tr>
 <tr>
    <td>固定投资</td>
    <td>1914.20 </td>
    <td>3099.00 </td>
    <td>2356.38 </td>
    <td>1981.29 </td>
    <td>1820.00 </td>
    <td>1458.50 </td>
 </tr>
 <tr>
    <td>消费总额</td>
    <td>1503.10 </td>
    <td>2808.17 </td>
    <td>2667.48 </td>
    <td>2069.84 </td>
    <td>1059.90 </td>
    <td>884.80 </td>
 </tr>
 <tr>
    <td>进出口</td>
    <td>72.10 </td>
    <td>66.10 </td>
    <td>67.72 </td>
    <td>54.38 </td>
    <td>35.30 </td>
    <td>53.80 </td>
 </tr>
 <tr>
    <td>预算收入</td>
    <td>274.40 </td>
    <td>428.80 </td>
    <td>303.69 </td>
    <td>348.80 </td>
    <td>205.80 </td>
    <td>255.20 </td>
 </tr>
 <tr>
    <td>居民收入</td>
    <td>7511.40 </td>
    <td>7704.90 </td>
    <td>8023.00 </td>
    <td>8617.48 </td>
    <td>7560.00 </td>
    <td>7902.90 </td>
 </tr>
 <tr>
    <td>农民收入</td>
    <td>2499.30 </td>
    <td>2553.15 </td>
    <td>2897.00 </td>
    <td>2838.00 </td>
    <td>2953.00 </td>
    <td>2589.60 </td>
 </tr>
 <tr>
    <td></td>
 </tr>
</table></li>
</ul>
<br>

<h3 id="7-2-解答过程"><a href="#7-2-解答过程" class="headerlink" title="7.2  解答过程"></a>7.2  解答过程</h3><ul>
<li>Spss求解<ul>
<li>1、对其中6(m)个变量13(z)个观测值,在<code>分析-描述统计-描述</code>中进行标准化处理，形成$[m\times z]$的矩阵A；  </li>
<li>2、对标准化处理后的矩阵在<code>分析-降维-因子</code>中进行因子降维，用主成分分析法提取出特征值大于特定值的n个重要成分，形成$[z\times n]$的矩阵B；  </li>
<li>3、将矩阵$A\times B$，即$[m,z]\times[z,n]&#x3D;[m,n]$，的到成分系数与标准化参数的乘积矩阵SS;  </li>
<li>4、对第二步中的选取的n个成分系数的权重重新分配，得到$[n,1]$的权重矩阵L；</li>
<li>5、矩阵$L\times S$，即得到评价值。</li>
</ul>
</li>
</ul>
<p><img src="/images/matlab/6/6-14.png" alt="6-14"><br><img src="/images/matlab/6/6-15.png" alt="6-15"></p>
<br>

<ul>
<li>Matlab求解</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">A=xlsread(&#x27;D:\File\文档\MATLAB\暑期训练\多元统计分析\各省GDP占比权重排名\a.xlsx&#x27;,&#x27;Sheet1&#x27;,&#x27;B1:N7&#x27;)%去取数据</span><br><span class="line">[B,B_mean,B_std]=zscore(A)%对A进行标准化处理</span><br><span class="line"></span><br><span class="line">[coeff,score,latent] = pca(B);</span><br><span class="line">latent%特征值</span><br><span class="line">l=latent(latent&gt;1) %选取特征值大于一的</span><br><span class="line">L=l/sum(l)%权重矩阵</span><br><span class="line">score %成分系数与标准化参数的乘积矩阵 </span><br><span class="line">S=score(:,1:3)</span><br><span class="line">E=S(:,1)*L(1)+S(:,2)*L(2)+S(:,3)*L(3)</span><br><span class="line">G=[&quot;安徽&quot;;&quot;河南&quot;;&quot;湖北&quot;;&quot;湖南&quot;;&quot;江西&quot;;&quot;山西&quot;]</span><br><span class="line"></span><br><span class="line">disp(&#x27;各省评价得分如下所示&#x27;)</span><br><span class="line">H=[&quot;省份&quot;,&quot;得分&quot;;G,E]</span><br></pre></td></tr></table></figure>
<br>

<h3 id="6-3-结果-1"><a href="#6-3-结果-1" class="headerlink" title="6.3  结果"></a>6.3  结果</h3><p><img src="/images/matlab/6/6-12.png" alt="6-12"></p>
<p><img src="/images/matlab/6/6-13.png" alt="6-13"></p>
<br>





<br>

<br>

<h2 id="8"></h2> 

<h2 id="八、主成分回归估计"><a href="#八、主成分回归估计" class="headerlink" title="八、主成分回归估计"></a>八、主成分回归估计</h2><h3 id="8-1-题目分析"><a href="#8-1-题目分析" class="headerlink" title="8.1  题目分析"></a>8.1  题目分析</h3><p>&amp;emsp;&amp;emsp;主成分估计（principal component estimate）是Massy在1965年提出的，它是回归系数参数的一种线性有偏估计（biased estimate），同其它有偏估计，如岭估计（ridge estimate）等一样，是为了克服最小二乘（LS）估计在设计阵病态（即存在多重共线性）时表现出的不稳定性而提出的。主成分估计采用的方法是将原来的回归自变量变换到另一组变量，即主成分，选择其中一部分重要的主成分作为新的自变量（此时丢弃了一部分，影响不大的自变量，这实际达到了降维的目的），然后用最小二乘法对选取主成分后的模型参数进行估计，最后再变换回原来的模型求出参数的估计。  </p>
<p>&amp;emsp;&amp;emsp;求解水泥的影响因子与热量值之间的线性关系：</p>
<table>
   <tr>
      <td>影响因子1</td>
      <td>影响因子2</td>
      <td>影响因子3</td>
      <td>影响因子4</td>
      <td>热量值</td>
   </tr>
   <tr>
      <td>7</td>
      <td>26</td>
      <td>6</td>
      <td>60</td>
      <td>78.5</td>
   </tr>
   <tr>
      <td>1</td>
      <td>29</td>
      <td>15</td>
      <td>52</td>
      <td>74.3</td>
   </tr>
   <tr>
      <td>11</td>
      <td>56</td>
      <td>8</td>
      <td>20</td>
      <td>104.3</td>
   </tr>
   <tr>
      <td>11</td>
      <td>31</td>
      <td>8</td>
      <td>47</td>
      <td>87.6</td>
   </tr>
   <tr>
      <td>7</td>
      <td>52</td>
      <td>6</td>
      <td>33</td>
      <td>95.9</td>
   </tr>
   <tr>
      <td>11</td>
      <td>55</td>
      <td>9</td>
      <td>22</td>
      <td>109.2</td>
   </tr>
   <tr>
      <td>3</td>
      <td>71</td>
      <td>17</td>
      <td>6</td>
      <td>102.7</td>
   </tr>
   <tr>
      <td>1</td>
      <td>31</td>
      <td>22</td>
      <td>44</td>
      <td>72.5</td>
   </tr>
   <tr>
      <td>2</td>
      <td>54</td>
      <td>18</td>
      <td>22</td>
      <td>93.1</td>
   </tr>
   <tr>
      <td>21</td>
      <td>47</td>
      <td>4</td>
      <td>26</td>
      <td>115.9</td>
   </tr>
   <tr>
      <td>1</td>
      <td>40</td>
      <td>23</td>
      <td>34</td>
      <td>83.8</td>
   </tr>
   <tr>
      <td>11</td>
      <td>66</td>
      <td>9</td>
      <td>12</td>
      <td>113.3</td>
   </tr>
   <tr>
      <td>10</td>
      <td>68</td>
      <td>8</td>
      <td>12</td>
      <td>109.4</td>
   </tr>
   <tr>
      <td></td>
   </tr>
</table>

<br>

<h3 id="8-2-程序解答"><a href="#8-2-程序解答" class="headerlink" title="8.2  程序解答"></a>8.2  程序解答</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line"></span><br><span class="line">A=xlsread(&#x27;D:\File\文档\MATLAB\暑期训练\多元统计分析\对水泥性质影响因素的线性回归\水泥.xlsx&#x27;,&#x27;Sheet1&#x27;,&#x27;A2:D14&#x27;);</span><br><span class="line">B=xlsread(&#x27;D:\File\文档\MATLAB\暑期训练\多元统计分析\对水泥性质影响因素的线性回归\水泥.xlsx&#x27;,&#x27;Sheet2&#x27;,&#x27;A2:A14&#x27;);</span><br><span class="line">[C,C_mean,C_std]=zscore(A)%对A标准化处理：C为标准化处理后的值；C_mean为均值；C_std为标准方差</span><br><span class="line">[G,S,L]=pca(C);</span><br><span class="line">L=L(1:3)%取特征值的前三个</span><br><span class="line"></span><br><span class="line">%求特征向量</span><br><span class="line">d1=size(C,1);</span><br><span class="line">d=(C&#x27;*C)/(d1-1);</span><br><span class="line">D=cov(d);</span><br><span class="line">e=pcacov(D)&#x27;;%特征向量</span><br><span class="line">E=e(1:3,:)&#x27;</span><br><span class="line">F=C*E %F=S</span><br><span class="line"></span><br><span class="line">Q=E&#x27;./C_std %</span><br><span class="line"></span><br><span class="line">syms X1 X2 X3 X4 F1 F2 F3</span><br><span class="line">F1=Q(1,1)*(X1-C_mean(1))+Q(1,2)*(X2-C_mean(2))+Q(1,3)*(X3-C_mean(3))+Q(1,4)*(X4-C_mean(4));</span><br><span class="line">F2=Q(2,1)*(X1-C_mean(1))+Q(2,2)*(X2-C_mean(2))+Q(2,3)*(X3-C_mean(3))+Q(2,4)*(X4-C_mean(4));</span><br><span class="line">F3=Q(3,1)*(X1-C_mean(1))+Q(3,2)*(X2-C_mean(2))+Q(3,3)*(X3-C_mean(3))+Q(3,4)*(X4-C_mean(4));</span><br><span class="line"></span><br><span class="line">y=95.423+9.883*F1+0.125*F2+4.555*F3;</span><br><span class="line"></span><br><span class="line">Y=vpa(y,4)</span><br></pre></td></tr></table></figure>

<br>

<h3 id="8-3-结果"><a href="#8-3-结果" class="headerlink" title="8.3  结果"></a>8.3  结果</h3><p><img src="/images/matlab/6/6-16.png" alt="6-16">  </p>
<p><img src="/images/matlab/6/6-17.png" alt="6-17"></p>
<br>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/18/Mathematical_modeling/matlab6/" data-id="cl3qp64260015z4qfd8dofqvm" data-title="Matlab案例分析" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/matlab%E5%BA%94%E7%94%A8/" rel="tag">matlab应用</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-学习/Python" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/15/%E5%AD%A6%E4%B9%A0/Python/" class="article-date">
  <time class="dt-published" datetime="2021-07-15T02:23:21.000Z" itemprop="datePublished">2021-07-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/15/%E5%AD%A6%E4%B9%A0/Python/">Python</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="1、新建文档，输入内容"><a href="#1、新建文档，输入内容" class="headerlink" title="1、新建文档，输入内容"></a>1、新建文档，输入内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fp=open (&#x27;d:/text.txt&#x27;,&#x27;w&#x27;)</span><br><span class="line">print(&#x27;Hellow world！！！&#x27;,file=fp)</span><br><span class="line">fp.close()</span><br></pre></td></tr></table></figure>


<h3 id="2-x2F-调用时间函数"><a href="#2-x2F-调用时间函数" class="headerlink" title="2&#x2F;调用时间函数"></a>2&#x2F;调用时间函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line"></span><br><span class="line">print (time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())) </span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/15/%E5%AD%A6%E4%B9%A0/Python/" data-id="cl3qp23pp001210qffcae9r9d" data-title="Python" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Learn/Python" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/15/Learn/Python/" class="article-date">
  <time class="dt-published" datetime="2021-07-15T02:23:21.000Z" itemprop="datePublished">2021-07-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/15/Learn/Python/">Python</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="1、新建文档，输入内容"><a href="#1、新建文档，输入内容" class="headerlink" title="1、新建文档，输入内容"></a>1、新建文档，输入内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fp=open (&#x27;d:/text.txt&#x27;,&#x27;w&#x27;)</span><br><span class="line">print(&#x27;Hellow world！！！&#x27;,file=fp)</span><br><span class="line">fp.close()</span><br></pre></td></tr></table></figure>


<h3 id="2-x2F-调用时间函数"><a href="#2-x2F-调用时间函数" class="headerlink" title="2&#x2F;调用时间函数"></a>2&#x2F;调用时间函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line"></span><br><span class="line">print (time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())) </span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/15/Learn/Python/" data-id="cl3qp642a001kz4qfexvy05p7" data-title="Python" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-杂谈/chouyouji" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/24/%E6%9D%82%E8%B0%88/chouyouji/" class="article-date">
  <time class="dt-published" datetime="2021-06-24T14:52:07.000Z" itemprop="datePublished">2021-06-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/24/%E6%9D%82%E8%B0%88/chouyouji/">曲柄平衡油梁式抽油机设计</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id='0'></h2>

<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><p><a href="#1">一、	设计题目及要求</a></p>
</li>
<li><p><a href="#2">二、	总体传动方案得设计</a></p>
</li>
<li><p><a href="#3">三、	连杆机构的尺度综合</a></p>
</li>
<li><p><a href="#4">四、	连杆机构的运动分析</a></p>
</li>
<li><p><a href="#5">五、	连杆机构的动力分析</a></p>
</li>
<li><p><a href="#6">六、	附录</a></p>
</li>
</ul>
<br>

<br>


<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&amp;emsp;&amp;emsp;这是机械原理课程得课程设计,在完成后我将其上传到我的博客算是我的学习成果！</p>
<h2 id='1'></h2>  

<br>

<br>

<h2 id="一、题目设计及其要求"><a href="#一、题目设计及其要求" class="headerlink" title="一、题目设计及其要求"></a>一、题目设计及其要求</h2><h3 id="1-1-题目设计———《游梁式抽油机连杆机构的分析与综合》"><a href="#1-1-题目设计———《游梁式抽油机连杆机构的分析与综合》" class="headerlink" title="1.1  题目设计———《游梁式抽油机连杆机构的分析与综合》"></a>1.1  题目设计———《游梁式抽油机连杆机构的分析与综合》</h3><br>

<p>&amp;emsp;&amp;emsp;游梁式抽油机结构如图 1 所示，它是有杆抽油系统的地面驱动装置，由电动机、减速器、机架和连杆机构等部分组成。其工作原理如图 2 所示：由电动机供给动力，经减速器将动力机的高速转动变为抽油机曲柄的低速转动，曲柄轴的低速旋转运动由连杆机构变为驴头悬绳器的上下往复直线运动，经悬绳器总成带动抽油泵工作，悬绳器下接抽油杆柱，抽油杆柱带动抽油泵柱塞(或活塞)在泵筒内作上下往复直线运动，从而将油井内的原油举升到地面，达到抽油的目的。悬点向上运动为抽油机工作行程，此过程中抽油杆带动井下柱塞泵工作，向上举升井液。悬点向下运动为回程，此过程不举升井液。悬点上下往复运动过程中所受的载荷为悬点载荷 $W$。</p>
<br>

<p><img src="/images/zatan/4/1-10.png" alt="1-10"> </p>
<be>

<p>&amp;emsp;&amp;emsp;下图所示为游梁式抽油机连杆机构示意图，由图可知，该抽油机主体机构由一个曲柄摇杆机构 O1BDO2和一绳轮机构串联而成。图中$R、P、C、K$ 分别为曲柄、连杆、游梁后臂（即摇杆）和机架的长度。游梁前臂长（即驴头弧线半径）为 A（即O2 点到井口的距离），两固定铰链点的高差（垂直极距）为 $H$、水平极距为 $I$，悬点冲程为$S$，机构的极位夹角为 $\theta$。</p>
<br>

<p><img src="/images/zatan/4/1-11.png" alt="1-11"> </p>
<be>  

<h4 id="1-1-1-抽油机的总体方案的设计"><a href="#1-1-1-抽油机的总体方案的设计" class="headerlink" title="1.1.1  抽油机的总体方案的设计"></a>1.1.1  抽油机的总体方案的设计</h4><p>&amp;emsp;&amp;emsp;构思一个合理的传动系统。它可将电机的高速转动（用电机转速 Nd 表示）变换为抽油杆的低速往复移动（用冲次 N 表示），所需数据详见表1，要求传动比误差不超过 5%。在构思机构传动方案时，能较为合理地分配各部分的传动比，最后在计算机上绘出机构传动示意图。<br><br>  </p>
<h4 id="1-1-2-抽油机连杆机构的尺度综合"><a href="#1-1-2-抽油机连杆机构的尺度综合" class="headerlink" title="1.1.2  抽油机连杆机构的尺度综合"></a>1.1.2  抽油机连杆机构的尺度综合</h4><p>&amp;emsp;&amp;emsp;根据给定的参数（详见表1），用解析法确定机构各杆的长度，并判断曲柄的合理转向。  </p>
<br>

<h4 id="1-1-3抽油机连杆机构的运动分析"><a href="#1-1-3抽油机连杆机构的运动分析" class="headerlink" title="1.1.3	抽油机连杆机构的运动分析"></a>1.1.3	抽油机连杆机构的运动分析</h4><p>&amp;emsp;&amp;emsp;根据已求出的机构尺度参数及电动机转速，用解析法求出当曲柄转角 $\theta_1$从悬点位于最点起，沿转动方向每隔$\ 10^\circ$计算一组运动参数，其中包括：机构的传动角 $\gamma$ ，各杆的角位置、角速度、角加速度及悬点的位移 $Si$（以悬点处于最低位置时，曲柄转角为初始位置）、速度 $Vi$ 和加速度 $ai$，应用计算机绘出传动角曲线，分析机构最小传动角出现的位置；分别绘出悬点位移 $Si$ 曲线、速度$Vi$ 曲线和加速度$ai$曲线，并将位移曲线、速度曲线和加速度曲线绘制在同一幅图中，分析计算结果的合理性。</p>
<h4 id="1-1-4抽油机工作机构动力分析"><a href="#1-1-4抽油机工作机构动力分析" class="headerlink" title="1.1.4	抽油机工作机构动力分析"></a>1.1.4	抽油机工作机构动力分析</h4><p>&amp;emsp;&amp;emsp;游梁式抽油机按照平衡重位置的布置方式的不同可分为游梁平衡、曲柄平衡和复合平衡。本次课设我们只考虑曲柄平衡：  </p>
<p>&amp;emsp;&amp;emsp;图 4 为游梁式抽油机工作机构受力示意图，给定如下参数： 悬点载荷W，曲柄重量$Q_1$、曲柄平衡重重量$Q_2$、游梁平衡重重量$Q_3$、旋转半径$R_1$、$R_2$和$R_3$，偏角$\tau_1$和$\tau_3$。<br>本次机械原理课程设计以曲柄平衡游梁式抽油机为研究对象，游梁平衡重重量$Q_3$及其重心旋转半径$R_3$和偏角$\tau_3$均取值为零。</p>
<p>&amp;emsp;&amp;emsp;请分别对曲柄平衡游梁式抽油机的游梁、连杆和曲柄进行受力分析，用解析法求出机构处于不同位置时各运动副的约束反力，以及在曲柄轴上施加的实际扭矩$TN$，用计算机绘出$TN$的变化曲线，并对计算结果进行分析，确定最大扭矩情况。  </p>
<br>

<p><img src="/images/zatan/4/1-101.png" alt="1-101"></p>
<br>

<h4 id="1-2-规格要求"><a href="#1-2-规格要求" class="headerlink" title="1.2  规格要求"></a>1.2  规格要求</h4><table>
<thead>
<tr>
<th align="center">$电机转速N_d (转&#x2F;分)$</th>
<th align="center">$冲次N(冲&#x2F;分)$</th>
<th align="center">$S(m)$</th>
<th align="center">$A(m)$</th>
<th align="center">$I(m)$</th>
<th align="center">$H(m)$</th>
<th align="center">$R(m)$</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$900$</td>
<td align="center">$11$</td>
<td align="center">$2.94$</td>
<td align="center">$3.65$</td>
<td align="center">$3.44$</td>
<td align="center">$3.47$</td>
<td align="center">$\le1$</td>
</tr>
<tr>
<td align="center">$\theta(^\circ)$</td>
<td align="center">$\gamma(^\circ)$</td>
<td align="center">$r_1(m)$</td>
<td align="center">$Q_1(m)$</td>
<td align="center">$r_2(m)$</td>
<td align="center">$Q_2(m)$</td>
<td align="center">$\tau(^\circ)$</td>
</tr>
<tr>
<td align="center">$11$</td>
<td align="center">$\ge 36$</td>
<td align="center">$0.6$</td>
<td align="center">$35000$</td>
<td align="center">$1.29$</td>
<td align="center">$61300$</td>
<td align="center">$7$</td>
</tr>
</tbody></table>
<br>

<table>
<thead>
<tr>
<th align="center">曲柄相对于初始位置转过的角度$(^\circ)$</th>
<th align="center">悬点载荷$W(N)$</th>
<th align="center">曲柄相对于初始位置转过的角度$(^\circ)$</th>
<th align="center">悬点载荷$W(N)$</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">58736</td>
<td align="center">190</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">60789</td>
<td align="center">200</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">20</td>
<td align="center">66140</td>
<td align="center">210</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">30</td>
<td align="center">74049</td>
<td align="center">220</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">40</td>
<td align="center">83539</td>
<td align="center">230</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">50</td>
<td align="center">93734</td>
<td align="center">240</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">60</td>
<td align="center">96316</td>
<td align="center">250</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">70</td>
<td align="center">92041</td>
<td align="center">2260</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">80</td>
<td align="center">88720</td>
<td align="center">270</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">90</td>
<td align="center">86353</td>
<td align="center">280</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">100</td>
<td align="center">84779</td>
<td align="center">290</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">110</td>
<td align="center">83764</td>
<td align="center">300</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">120</td>
<td align="center">83064</td>
<td align="center">310</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">130</td>
<td align="center">82443</td>
<td align="center">320</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">140</td>
<td align="center">81679</td>
<td align="center">330</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">150</td>
<td align="center">80545</td>
<td align="center">340</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">160</td>
<td align="center">78801</td>
<td align="center">350</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">170</td>
<td align="center">72217</td>
<td align="center">360</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">180</td>
<td align="center">72700</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<br>

<h4 id="回到顶端"><a href="#回到顶端" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4><br>
<h2 id='2'></h2>

<h2 id="二、总体传动方案的设计"><a href="#二、总体传动方案的设计" class="headerlink" title="二、总体传动方案的设计"></a>二、总体传动方案的设计</h2><h3 id="2-1-传动比"><a href="#2-1-传动比" class="headerlink" title="2.1  传动比"></a>2.1  传动比</h3><p>&amp;emsp;&amp;emsp;由题可知，电机转速为$N_d&#x3D;980$转&#x2F;分，需将其转化为推油杆的低俗往复运动，冲次为$11$转&#x2F;分。</p>
<br>

<p><img src="/images/zatan/4/1-112.png" alt="1-112"></p>
<br>

<h3 id="2-2-设计图"><a href="#2-2-设计图" class="headerlink" title="2.2  设计图"></a>2.2  设计图</h3><br>

<p><img src="/images/zatan/4/1-12.png" alt="1-12"><br><br></p>
<p><img src="/images/zatan/4/1-13.png" alt="1-13"><br><br></p>
<p><img src="/images/zatan/4/1-15.png" alt="1-15"><br><br></p>
<p><img src="/images/zatan/4/1-14.png" alt="1-14"></p>
<br>

<h4 id="回到顶端-1"><a href="#回到顶端-1" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4><br>
<h2 id='3'></h2>

<h2 id="三、连杆机构的尺度综合"><a href="#三、连杆机构的尺度综合" class="headerlink" title="三、连杆机构的尺度综合"></a>三、连杆机构的尺度综合</h2><h3 id="3-1-建立模型"><a href="#3-1-建立模型" class="headerlink" title="3.1  建立模型"></a>3.1  建立模型</h3><p>由已知条件可以得出：<br><br></p>
<center>

<p>$k&#x3D;\sqrt{H^2+I^2}&#x3D;4.89$</p>
<br>

<br>


<p>$\psi&#x3D;\frac{S}{A}·\frac{180}{\pi}&#x3D;38.85^\circ$</p>
<br>

<br>


</center>

<p>在$\Delta{D_2D_1O_2}$中：</p>
<br>


<center>

<p>$cos\Phi_1&#x3D;\frac{2C^2-(D_1D_2)^2}{2C^2}$</p>
</center>


<br>


<p>在$\Delta{D_2D_1O_1}$中：</p>
<br>

<center>

<p>$cos\Phi_2&#x3D;\frac{(P+R)^2+(P-R)^2-D_1D_2}{2C^2}$</p>
</center>


<br>

<p>由上述两个式子化简得到:</p>
<br>


<center>

<p>${D_1D_2}^2&#x3D;(P+R)^2+(P-R)^2-2(P^2-R^2)cos\theta&#x3D;2C^2-2C^2(1-cos\theta)$</p>
</center>

<br>

<p>进一步化简得到：  </p>
<br>  


<center>

<p>$C&#x3D;\sqrt{\frac{P^2(1-cos\theta)-R^2(1+cos\theta)}{2sin^2{\frac{\theta}{2}}}}$</p>
<br>

<br>

<p>$P&#x3D;\begin{Bmatrix} \frac{K^2-R^2\begin{bmatrix}\frac{1+cos\theta}{2sin^2\frac{\psi}{2}}-\frac{sin\theta}{tan\frac{\psi}{2}}-cos\theta\end{bmatrix}}{\frac{1-cos\theta}{2sin^2\frac{\psi}{2}}+\frac{sin\theta}{tan\frac{\psi}{2}}+cos\theta}\end{Bmatrix}^\frac{1}{2}$</p>
</center>

<br>

<p>根据机构极限位置可以求出2个传动角公式：</p>
<br>


<center>

<p>$\gamma_1&#x3D;arccos(\frac{C^2+P^2-(K+R)^2}{2CP})$</p>
<br>

<br>


<p>$\gamma_2&#x3D;arccos(\frac{C^2+P^2-(K+R)^2}{2CP})$</p>
<br>

<br>


<p>$\gamma_m&#x3D;min(\gamma_1,\gamma_2)$</p>
<br>


<br>


</center>

<h3 id="3-2-迭代求值"><a href="#3-2-迭代求值" class="headerlink" title="3.2  迭代求值"></a>3.2  迭代求值</h3><center><img src="/images/zatan/4/1-21.png" width="100%" height="100%" align=center /></center>


<p>详细解析：</p>
<center><img src="/images/zatan/4/1-22.png" width="100%" height="100%" align=center /></center>

<br>

<p>由此可得出最优解：</p>
<p>$R&#x3D;1m,P&#x3D;3.558m,C&#x3D;2.6846m时,传动角最大为{39.314}^\circ$</p>
<br>
当$Si$取最大值和最小值时，曲柄得角度分别为：

<center>

<p>$\phi_1&#x3D;78^\circ$</p>
<br>

<br>

<p>$\phi_2&#x3D;247^\circ$</p>
</center>

<p>故，该机构要实现速降缓升需要将曲柄顺时针转动。  </p>
<br>

<h4 id="回到顶端-2"><a href="#回到顶端-2" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4><br>
<h2 id='4'></h2>

<h2 id="四、连杆机构运动分析"><a href="#四、连杆机构运动分析" class="headerlink" title="四、连杆机构运动分析"></a>四、连杆机构运动分析</h2><h3 id="4-1-建立模型"><a href="#4-1-建立模型" class="headerlink" title="4.1  建立模型"></a>4.1  建立模型</h3><p>&amp;emsp;&amp;emsp;首先求出$\theta_1$的初始位置，当摇杆运动到最低点时，曲柄，连杆在同一条直线上，在$\Delta O_1O_2D_2$与由$K、I、H$所组成的直角三角形中，可算出曲柄相对于水平线的角度，列出公式：  </p>
<br>

<center>



<p>$\theta_1&#x3D;arccos\frac{(P+R)^2+K^2-C^2}{2(P+R)^2K}+(90^\circ-arctan(\frac{H}{I}))$</p>
</center>

<br>

<p>可得 $\theta_1$的初始角为${78}^\circ$，在下图中，对其进行位置分析:</p>
<br>

<center>

<p>$\overrightarrow{P}&#x3D;\overrightarrow{K}+\overrightarrow{C}-\overrightarrow{R}$</p>
</center>

<br>


<center>

<p>$Psin\theta_2&#x3D;H+Csin\theta_3-Rsin\theta_1&#x3D;M$</p>
<br>


<br>

<p>$Pcos\theta_2&#x3D;I+Ccos\theta_3-Rcos\theta_1&#x3D;N$</p>
</center>

<br>



<p>联立可得：</p>
<br>


<center>

<p>$\omega_2&#x3D;\frac{\omega_1Rsin(\theta_1-\theta_3)}{Psin(\theta_3-\theta_2)}$</p>
<br>

<br>

<p>$\omega_3&#x3D;\frac{\omega_1Rsin(\theta_2-\theta_1)}{Csin(\theta_2-\theta_3)}$</p>
</center>



<br>

<p>求导;</p>
<br>

<center>


<p>$\alpha_3&#x3D;\frac{\omega_1Rcos(\theta_1-\theta_3)(\omega_2-\omega_1)sin(\theta_2-\theta_3)-sin(\theta_2-\theta_1)(\omega_2-\omega_3)cos(\theta_2-\theta_3)}{Psin(\theta_2-\theta_3)^2}$</p>
<br>

<br>

<p>$\alpha_2&#x3D;\frac{\omega_1Rcos(\theta_2-\theta_1)(\omega_1-\omega_3)sin(\theta_3-\theta_2)-sin(\theta_1-\theta_3)(\omega_3-\omega_2)cos(\theta_3-\theta_2)}{Psin(\theta_3-\theta_2)^2}$</p>
</center>

<br>

<h3 id="4-2-确定公式"><a href="#4-2-确定公式" class="headerlink" title="4.2  确定公式"></a>4.2  确定公式</h3><p>悬点位移：</p>
<br>

<center>

<p>$S_e&#x3D;A\times\psi$</p>
</center>

<br>

<p>悬点速度：</p>
<br>

<center>

<p>$V_e&#x3D;A\times\omega_3$</p>
</center>

<br>

<p>悬点加速度：</p>
<br>

<center>

<p>$\alpha_e&#x3D;A\times\alpha_3$</p>
</center>

<br>

<h3 id="4-3-编程绘图"><a href="#4-3-编程绘图" class="headerlink" title="4.3  编程绘图"></a>4.3  编程绘图</h3><p><img src="/images/zatan/4/1-31.png" alt="1-31"></p>
<p><img src="/images/zatan/4/1-32.png" alt="1-32"></p>
<p><img src="/images/zatan/4/1-33.png" alt="1-33"></p>
<br>

<h4 id="回到顶端-3"><a href="#回到顶端-3" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4><br>


<h2 id='5'></h2>

<h2 id="五、连杆机构动力分析"><a href="#五、连杆机构动力分析" class="headerlink" title="五、连杆机构动力分析"></a>五、连杆机构动力分析</h2><h3 id="5-1-建立模型"><a href="#5-1-建立模型" class="headerlink" title="5.1  建立模型"></a>5.1  建立模型</h3><p>在图中，分别对曲柄、连杆、油梁受力分析可以得到9个方程：</p>
<br>

<p>$\begin{cases} R_{21x}+R_{41x}&#x3D;0 \R_{21y}+R_{41y}&#x3D;0 \ T_N+Q_1r_1cos(\tau_1+\theta_1)+Q_2r_2cos(\tau_1+\theta_1)+R_{21x}Rsin\theta_1&#x3D;R_{21y}Rcos\theta_1 \end{cases}$</p>
<br>

<p>$\begin{cases} R_{21x}&#x3D;R_{32x}\R_{21y}&#x3D;R_{32y}\ R_{32y}Pcos\theta_2&#x3D;R_{32x}Psin\theta_2 \end{cases}$</p>
<br>

<p>$\begin{cases} R_{43x}&#x3D;R_{32x}\R_{43y}&#x3D;R_{32y}+W+Q_3\ AW&#x3D;R_{32y}Ccos\tau_3+R_{32x}Ctan\theta_3+Q_3r_3\end{cases}$</p>
<br>

<p>$T_W&#x3D;\frac{AW(tan\theta_2cos\theta_1-sin\theta_1)}{C(sin\theta_3-tan\theta_2cos\theta_3)}$</p>
<br>

<p>$T_Q&#x3D;cos(\tau_1+\theta_1)(Q_1r_1+Q_2r_2)$</p>
<br>

<p>$TN&#x3D;T_W-T_Q$</p>
<br>


<h3 id="5-2-程序绘图"><a href="#5-2-程序绘图" class="headerlink" title="5.2  程序绘图"></a>5.2  程序绘图</h3><p><img src="/images/zatan/4/1-41.png" alt="1-41"></p>
<br>


<center><img src="/images/zatan/4/1-42.png" width="100%" height="100%" align=center /></center>

<br>

<p>&amp;emsp;&amp;emsp;从上述表可以看出，净扭矩在${328}^\circ$左右时最大，最大约为$42.9417kN$，冲表格可得出净扭矩图线的曲线是等于载荷扭矩减去平衡扭矩曲线，说明三条曲线是符合$T_N&#x3D;T_w-T_Q$，所以，此图合理。</p>
<br>



<h4 id="回到顶端-4"><a href="#回到顶端-4" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4><br>

<h2 id='6'></h2>

<h2 id="六、附录"><a href="#六、附录" class="headerlink" title="六、附录"></a>六、附录</h2><h3 id="6-1-游梁式抽油机连杆机构尺度综合优选方法程序"><a href="#6-1-游梁式抽油机连杆机构尺度综合优选方法程序" class="headerlink" title="6.1  游梁式抽油机连杆机构尺度综合优选方法程序"></a>6.1  游梁式抽油机连杆机构尺度综合优选方法程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">%游梁式抽油机连杆机构尺度综合优选方法</span><br><span class="line"></span><br><span class="line">theta=11;</span><br><span class="line"></span><br><span class="line">k=sqrt(3.47^2+3.44^2);</span><br><span class="line"></span><br><span class="line">psi=rad2deg(2.94/3.65)</span><br><span class="line"></span><br><span class="line">r=0.8:0.01:1;</span><br><span class="line">a1=(1+cosd(theta))/(2*(sind(psi/2))^2);</span><br><span class="line">a2=sind(theta)/tand(psi/2);</span><br><span class="line">a3=(1-cosd(theta))/(2*(sind(psi/2))^2);</span><br><span class="line">a4=(sind(theta)/tand(psi/2));</span><br><span class="line"></span><br><span class="line">P=sqrt(abs((k^2-(a1-a2-cosd(theta))*r.^2)/(a3+a4+cosd(theta))));</span><br><span class="line">C=sqrt((P.^2*(1-cosd(theta))+r.^2*(1+cosd(theta)))/(2*(sind(psi/2))^2));</span><br><span class="line">b1=(k^2-(a1-a2-cosd(theta)));</span><br><span class="line">b2=(a3+a4+cosd(theta));</span><br><span class="line">b3=P.^2*(1-cosd(theta));</span><br><span class="line">b4=r.^2*(1+cosd(theta));</span><br><span class="line">b5=2*(sind(psi/2))^2;</span><br><span class="line"></span><br><span class="line">c1=k-r;</span><br><span class="line">c2=k+r;</span><br><span class="line">c3=(P.^2+C.^2-c1.^2)./(2.*P.*C);</span><br><span class="line">c4=(P.^2+C.^2-c2.^2)./(2.*P.*C);</span><br><span class="line">gamma1_1=acosd(c3(c3&gt;0));</span><br><span class="line">gamma1_2=180-acosd(c3(c3&lt;0));</span><br><span class="line">gamma1=[gamma1_2,gamma1_1];</span><br><span class="line"></span><br><span class="line">gamma2=180-acosd(c4);</span><br><span class="line">B=min(gamma1,gamma2);</span><br><span class="line">disp([&#x27;       R/m   &#x27;,&#x27;   P/m   &#x27;,&#x27;    C/m&#x27;,&#x27;    gamma_1&#x27;,&#x27;   gamma_2&#x27;,&#x27;    gamma_min&#x27;])</span><br><span class="line">A=[r;P;C;gamma1;gamma2;B]&#x27;</span><br></pre></td></tr></table></figure>



<h3 id="6-2-游梁式抽油机连杆机构运动分析优选方法程序"><a href="#6-2-游梁式抽油机连杆机构运动分析优选方法程序" class="headerlink" title="6.2  游梁式抽油机连杆机构运动分析优选方法程序"></a>6.2  游梁式抽油机连杆机构运动分析优选方法程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">format</span><br><span class="line">disp([&#x27;****************************************************************准备工作**************************************************************&#x27;])</span><br><span class="line">P=3.5580;</span><br><span class="line">C=2.6846;</span><br><span class="line">R=1;</span><br><span class="line">I=3.44;</span><br><span class="line">H=3.47;</span><br><span class="line">A=3.65;</span><br><span class="line">K=sqrt(I^2+H^2);</span><br><span class="line">phi2=acosd(I/K);%下机架角</span><br><span class="line">phi1=acosd(H/K);%上机架角</span><br><span class="line">disp([&#x27;     P&#x27;,&#x27;         C&#x27;,&#x27;         R&#x27;,&#x27;         I&#x27;,&#x27;          H&#x27;,&#x27;         A&#x27;,&#x27;         K&#x27;])</span><br><span class="line">[P;C;R;I;H;A;K]&#x27;</span><br><span class="line">%**********************************************</span><br><span class="line">a1=acosd(((P+R)^2+K^2-C^2)/(2*(P+R)*K));%死点角</span><br><span class="line">H1=(P+R)*sind(a1+phi2);</span><br><span class="line">H2=H1-H;</span><br><span class="line">a2=asind(H2/C);</span><br><span class="line">a=180-a2; %o2初始角</span><br><span class="line"></span><br><span class="line">b1=acosd(((P-R)^2+K^2-C^2)/(2*(P-R)*K));%死点角</span><br><span class="line">H3=(P-R)*sind(b1+phi2);</span><br><span class="line">H4=H-H3;</span><br><span class="line">b2=asind(H4/C);</span><br><span class="line">%末尾角</span><br><span class="line">b=180+b2;</span><br><span class="line">%*********************************************</span><br><span class="line"></span><br><span class="line">gamma_1=acosd((C^2+K^2-(R+P)^2)/(2*C*K));</span><br><span class="line">gamma_2=acosd((C^2+K^2-(P-R)^2)/(2*C*K));</span><br><span class="line">gamma=gamma_1-gamma_2;</span><br><span class="line">sigma1=a1+phi2;%主动杆死角1</span><br><span class="line">sigma2=180+phi2+b1 ;%主动杆死角2</span><br><span class="line">disp([&#x27;\theta1的两个特殊角：&#x27;])</span><br><span class="line">lambda1=[sigma1,sigma2]</span><br><span class="line"></span><br><span class="line">disp([&#x27;\theta3的角度（摆角）：&#x27;])</span><br><span class="line">psi=[a,b]</span><br><span class="line"></span><br><span class="line">disp([&#x27;****************************************************************计算结果****************************************************************&#x27;])</span><br><span class="line">%计算准备</span><br><span class="line">theta1=[78:1:438];</span><br><span class="line">omega1=deg2rad(66)%rad/s</span><br><span class="line">%************************************************************计算杆的角位移：</span><br><span class="line">e1=2*H*C-2*C*R*sind(theta1);</span><br><span class="line">e2=2*I*C-2*C*R*cosd(theta1);</span><br><span class="line">e3=P^2-K^2-C^2-R^2+2*H*R*sind(theta1)+2*I*R*cosd(theta1);</span><br><span class="line">theta3=2*atand((e1+sqrt(e1.^2+e2.^2-e3.^2))./(e2+e3));%deg</span><br><span class="line">theta3(theta3(:)&lt;0)=theta3((theta3(:)&lt;0))+360;</span><br><span class="line">theta2=asind((H+C*sind(theta3)-R*sind(theta1))/P);%deg</span><br><span class="line"></span><br><span class="line">%************************************************************计算杆的角速度：</span><br><span class="line">omega2=(omega1*R*sind(theta1-theta3))./(P*sind(theta2-theta3));%rads</span><br><span class="line">omega3=-(omega1*R*sind(theta1-theta2))./(P*sind(theta3-theta2));%rad/s</span><br><span class="line">F=[theta1;omega2;omega3]&#x27;;</span><br><span class="line">%**********************************************************计算杆的角加速度：</span><br><span class="line"></span><br><span class="line">f1=R.*omega1.^2.*sind(theta1)+P.*omega2.^2.*sind(theta2)-C.*omega3.^2.*sind(theta3);</span><br><span class="line">f2=R.*omega1.^2.*cosd(theta1)+P.*omega2.^2.*cosd(theta2)-C.*omega3.^2.*cosd(theta3);</span><br><span class="line">alpha2=(-(f2.*cosd(theta3)+f1.*sind(theta3))./(P.*sind(theta2-theta3)));</span><br><span class="line">alpha3=(-(f2.*cosd(theta2)+f1.*sind(theta2))./(C.*sind(theta2-theta3)));%rad/s^2theta2;omega2;alpha2;</span><br><span class="line">%******************************************************************求传动角</span><br><span class="line"></span><br><span class="line">g2=theta1-phi2;</span><br><span class="line">G2=sqrt(R^2+K^2-2*R*K.*cosd(g2));</span><br><span class="line">g3=acosd((P^2+C^2-G2.^2)./(2*P*C));</span><br><span class="line">g3(g3(:)&gt;90)=180-g3(g3(:)&gt;90);</span><br><span class="line">%******************************************************************整理结果：&#x27;   P角位移&#x27;,&#x27;   P角速度&#x27;,&#x27;  P角加速度&#x27;,</span><br><span class="line">Vi=A.*omega3;</span><br><span class="line">Ai=A.*alpha3;</span><br><span class="line">Si=deg2rad(theta3-a)*3.65;</span><br><span class="line">disp([&#x27;   R角位移&#x27;,&#x27;    C角位移&#x27;,&#x27;   C角速度&#x27;,&#x27;  C角加速度&#x27;,&#x27;  悬点位移&#x27;,&#x27;  悬点速度&#x27;,&#x27;  悬点加速度&#x27;,&#x27;  传动角&#x27;])</span><br><span class="line">E=[theta1;theta3;omega3;alpha3;Si;Vi;Ai;g3]&#x27;</span><br><span class="line"></span><br><span class="line">figure(1)</span><br><span class="line">plot(theta1,Si,&#x27;r&#x27;,theta1,Vi,&#x27;b&#x27;,theta1,Ai,&#x27;m&#x27;)</span><br><span class="line">axis([80,440,-2.5,3.5]);</span><br><span class="line">title(&#x27;抽油机--速度图、加速度、位移曲线&#x27;)</span><br><span class="line">text(260,3.2,&#x27;位移&#x27;)</span><br><span class="line">text(260,0.6,&#x27;速度&#x27;)</span><br><span class="line">text(260,-1.2,&#x27;加速度&#x27;)</span><br><span class="line">set(gca, &#x27;Xtick&#x27;,80:30:440)</span><br><span class="line">set(gca,&#x27;XDir&#x27;,&#x27;reverse&#x27;)</span><br><span class="line">set(gca,&#x27;Xticklabel&#x27;,&#123;&#x27;80\circ&#x27;,&#x27;110\circ&#x27;,&#x27;140\circ&#x27;,&#x27;170\circ&#x27;,&#x27;200\circ&#x27;,&#x27;230\circ&#x27;,&#x27;260\circ&#x27;,&#x27;290\circ&#x27;,&#x27;320\circ&#x27;,&#x27;350\circ&#x27;,&#x27;20\circ&#x27;,&#x27;50\circ&#x27;,&#x27;80\circ&#x27;,&#125;)</span><br><span class="line">grid on;</span><br><span class="line"></span><br><span class="line">figure(2)</span><br><span class="line">plot(theta1,g3)</span><br><span class="line">axis([80,440,35,90]);</span><br><span class="line">title(&#x27;传动角曲线&#x27;)</span><br><span class="line">text(290,70,&#x27;传动角&#x27;)</span><br><span class="line">set(gca, &#x27;Xtick&#x27;,80:30:440)</span><br><span class="line">set(gca,&#x27;XDir&#x27;,&#x27;reverse&#x27;)</span><br><span class="line">set(gca,&#x27;Xticklabel&#x27;,&#123;&#x27;80\circ&#x27;,&#x27;110\circ&#x27;,&#x27;140\circ&#x27;,&#x27;170\circ&#x27;,&#x27;200\circ&#x27;,&#x27;230\circ&#x27;,&#x27;260\circ&#x27;,&#x27;290\circ&#x27;,&#x27;320\circ&#x27;,&#x27;350\circ&#x27;,&#x27;20\circ&#x27;,&#x27;50\circ&#x27;,&#x27;80\circ&#x27;,&#125;)</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>


<h3 id="6-3-游梁式抽油机连杆机构动力分析优选方法程序"><a href="#6-3-游梁式抽油机连杆机构动力分析优选方法程序" class="headerlink" title="6.3  游梁式抽油机连杆机构动力分析优选方法程序"></a>6.3  游梁式抽油机连杆机构动力分析优选方法程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line">%**********************************************************************准备工作*********************************************************************************************</span><br><span class="line">a1=[78:10:428];%初始角度</span><br><span class="line">a2=[58.736 60.789 66.140 74.049 83.539 93.734 96.316 92.041 88.720 86.353 84.779 83.764 83.064 82.443 81.679 80.545 78.801 76.217 72.700 68.580 64.255 59.912 56.190 51.728 44.526 41.421 43.896 45.992 47.817 49.482 51.073 52.642 54.199 55.708 57.076 58.151];</span><br><span class="line">%悬梁载荷</span><br><span class="line">Q1=35;</span><br><span class="line">Q2=61.3;</span><br><span class="line">R1=0.6;</span><br><span class="line">R2=1.29;</span><br><span class="line">omega1=deg2rad(66);%rad/s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%**********************************************************************计算过程**********************************************************************************************</span><br><span class="line"></span><br><span class="line">Tn1=(a2.*3.65/2.6846).*sind(a1-90);</span><br><span class="line">Tn2=(Q1*R1+Q2*R2)*sind(a1-83);</span><br><span class="line">Tn=Tn2-Tn1;</span><br><span class="line">disp([&#x27;    偏转角&#x27;,&#x27;   载荷扭矩&#x27;,&#x27;   平衡扭矩&#x27;,&#x27;   净扭矩&#x27;])</span><br><span class="line">A=[a1;Tn1;Tn2;Tn]&#x27;</span><br><span class="line"></span><br><span class="line">plot(a1,Tn,&#x27;r&#x27;,a1,Tn1,&#x27;b&#x27;,a1,Tn2,&#x27;black&#x27;)</span><br><span class="line">xlabel(&#x27;曲柄角度/\circ&#x27;)</span><br><span class="line">ylabel(&#x27;力矩/KN&#x27;)</span><br><span class="line">text(260,100,&#x27;载荷扭矩&#x27;)</span><br><span class="line">text(200,80,&#x27;平衡扭矩&#x27;)</span><br><span class="line">text(200,-10,&#x27;净扭矩&#x27;)</span><br><span class="line">axis([78,428,-110,120]);</span><br><span class="line">set(gca,&#x27;XDir&#x27;,&#x27;reverse&#x27;)</span><br><span class="line">set(gca, &#x27;Xtick&#x27;,80:30:440)</span><br><span class="line">set(gca,&#x27;Xticklabel&#x27;,&#123;&#x27;80\circ&#x27;,&#x27;110\circ&#x27;,&#x27;140\circ&#x27;,&#x27;170\circ&#x27;,&#x27;200\circ&#x27;,&#x27;230\circ&#x27;,&#x27;260\circ&#x27;,&#x27;290\circ&#x27;,&#x27;320\circ&#x27;,&#x27;350\circ&#x27;,&#x27;20\circ&#x27;,&#x27;50\circ&#x27;,&#x27;80\circ&#x27;,&#125;)</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="回到顶端-5"><a href="#回到顶端-5" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/24/%E6%9D%82%E8%B0%88/chouyouji/" data-id="cl3qp23pu001g10qf0ho2hp4i" data-title="曲柄平衡油梁式抽油机设计" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%BA%E6%A2%B0%E5%8E%9F%E7%90%86/" rel="tag">机械原理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%BA%E6%A2%B0%E8%AE%BE%E8%AE%A1/" rel="tag">机械设计</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Miscellaneous/chouyouji" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/24/Miscellaneous/chouyouji/" class="article-date">
  <time class="dt-published" datetime="2021-06-24T14:52:07.000Z" itemprop="datePublished">2021-06-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/24/Miscellaneous/chouyouji/">曲柄平衡油梁式抽油机设计</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id='0'></h2>

<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><p><a href="#1">一、	设计题目及要求</a></p>
</li>
<li><p><a href="#2">二、	总体传动方案得设计</a></p>
</li>
<li><p><a href="#3">三、	连杆机构的尺度综合</a></p>
</li>
<li><p><a href="#4">四、	连杆机构的运动分析</a></p>
</li>
<li><p><a href="#5">五、	连杆机构的动力分析</a></p>
</li>
<li><p><a href="#6">六、	附录</a></p>
</li>
</ul>
<br>

<br>


<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&amp;emsp;&amp;emsp;这是机械原理课程得课程设计,在完成后我将其上传到我的博客算是我的学习成果！</p>
<h2 id='1'></h2>  

<br>

<br>

<h2 id="一、题目设计及其要求"><a href="#一、题目设计及其要求" class="headerlink" title="一、题目设计及其要求"></a>一、题目设计及其要求</h2><h3 id="1-1-题目设计———《游梁式抽油机连杆机构的分析与综合》"><a href="#1-1-题目设计———《游梁式抽油机连杆机构的分析与综合》" class="headerlink" title="1.1  题目设计———《游梁式抽油机连杆机构的分析与综合》"></a>1.1  题目设计———《游梁式抽油机连杆机构的分析与综合》</h3><br>

<p>&amp;emsp;&amp;emsp;游梁式抽油机结构如图 1 所示，它是有杆抽油系统的地面驱动装置，由电动机、减速器、机架和连杆机构等部分组成。其工作原理如图 2 所示：由电动机供给动力，经减速器将动力机的高速转动变为抽油机曲柄的低速转动，曲柄轴的低速旋转运动由连杆机构变为驴头悬绳器的上下往复直线运动，经悬绳器总成带动抽油泵工作，悬绳器下接抽油杆柱，抽油杆柱带动抽油泵柱塞(或活塞)在泵筒内作上下往复直线运动，从而将油井内的原油举升到地面，达到抽油的目的。悬点向上运动为抽油机工作行程，此过程中抽油杆带动井下柱塞泵工作，向上举升井液。悬点向下运动为回程，此过程不举升井液。悬点上下往复运动过程中所受的载荷为悬点载荷 $W$。</p>
<br>

<p><img src="/images/zatan/4/1-10.png" alt="1-10"> </p>
<be>

<p>&amp;emsp;&amp;emsp;下图所示为游梁式抽油机连杆机构示意图，由图可知，该抽油机主体机构由一个曲柄摇杆机构 O1BDO2和一绳轮机构串联而成。图中$R、P、C、K$ 分别为曲柄、连杆、游梁后臂（即摇杆）和机架的长度。游梁前臂长（即驴头弧线半径）为 A（即O2 点到井口的距离），两固定铰链点的高差（垂直极距）为 $H$、水平极距为 $I$，悬点冲程为$S$，机构的极位夹角为 $\theta$。</p>
<br>

<p><img src="/images/zatan/4/1-11.png" alt="1-11"> </p>
<be>  

<h4 id="1-1-1-抽油机的总体方案的设计"><a href="#1-1-1-抽油机的总体方案的设计" class="headerlink" title="1.1.1  抽油机的总体方案的设计"></a>1.1.1  抽油机的总体方案的设计</h4><p>&amp;emsp;&amp;emsp;构思一个合理的传动系统。它可将电机的高速转动（用电机转速 Nd 表示）变换为抽油杆的低速往复移动（用冲次 N 表示），所需数据详见表1，要求传动比误差不超过 5%。在构思机构传动方案时，能较为合理地分配各部分的传动比，最后在计算机上绘出机构传动示意图。<br><br>  </p>
<h4 id="1-1-2-抽油机连杆机构的尺度综合"><a href="#1-1-2-抽油机连杆机构的尺度综合" class="headerlink" title="1.1.2  抽油机连杆机构的尺度综合"></a>1.1.2  抽油机连杆机构的尺度综合</h4><p>&amp;emsp;&amp;emsp;根据给定的参数（详见表1），用解析法确定机构各杆的长度，并判断曲柄的合理转向。  </p>
<br>

<h4 id="1-1-3抽油机连杆机构的运动分析"><a href="#1-1-3抽油机连杆机构的运动分析" class="headerlink" title="1.1.3	抽油机连杆机构的运动分析"></a>1.1.3	抽油机连杆机构的运动分析</h4><p>&amp;emsp;&amp;emsp;根据已求出的机构尺度参数及电动机转速，用解析法求出当曲柄转角 $\theta_1$从悬点位于最点起，沿转动方向每隔$\ 10^\circ$计算一组运动参数，其中包括：机构的传动角 $\gamma$ ，各杆的角位置、角速度、角加速度及悬点的位移 $Si$（以悬点处于最低位置时，曲柄转角为初始位置）、速度 $Vi$ 和加速度 $ai$，应用计算机绘出传动角曲线，分析机构最小传动角出现的位置；分别绘出悬点位移 $Si$ 曲线、速度$Vi$ 曲线和加速度$ai$曲线，并将位移曲线、速度曲线和加速度曲线绘制在同一幅图中，分析计算结果的合理性。</p>
<h4 id="1-1-4抽油机工作机构动力分析"><a href="#1-1-4抽油机工作机构动力分析" class="headerlink" title="1.1.4	抽油机工作机构动力分析"></a>1.1.4	抽油机工作机构动力分析</h4><p>&amp;emsp;&amp;emsp;游梁式抽油机按照平衡重位置的布置方式的不同可分为游梁平衡、曲柄平衡和复合平衡。本次课设我们只考虑曲柄平衡：  </p>
<p>&amp;emsp;&amp;emsp;图 4 为游梁式抽油机工作机构受力示意图，给定如下参数： 悬点载荷W，曲柄重量$Q_1$、曲柄平衡重重量$Q_2$、游梁平衡重重量$Q_3$、旋转半径$R_1$、$R_2$和$R_3$，偏角$\tau_1$和$\tau_3$。<br>本次机械原理课程设计以曲柄平衡游梁式抽油机为研究对象，游梁平衡重重量$Q_3$及其重心旋转半径$R_3$和偏角$\tau_3$均取值为零。</p>
<p>&amp;emsp;&amp;emsp;请分别对曲柄平衡游梁式抽油机的游梁、连杆和曲柄进行受力分析，用解析法求出机构处于不同位置时各运动副的约束反力，以及在曲柄轴上施加的实际扭矩$TN$，用计算机绘出$TN$的变化曲线，并对计算结果进行分析，确定最大扭矩情况。  </p>
<br>

<p><img src="/images/zatan/4/1-101.png" alt="1-101"></p>
<br>

<h4 id="1-2-规格要求"><a href="#1-2-规格要求" class="headerlink" title="1.2  规格要求"></a>1.2  规格要求</h4><table>
<thead>
<tr>
<th align="center">$电机转速N_d (转&#x2F;分)$</th>
<th align="center">$冲次N(冲&#x2F;分)$</th>
<th align="center">$S(m)$</th>
<th align="center">$A(m)$</th>
<th align="center">$I(m)$</th>
<th align="center">$H(m)$</th>
<th align="center">$R(m)$</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$900$</td>
<td align="center">$11$</td>
<td align="center">$2.94$</td>
<td align="center">$3.65$</td>
<td align="center">$3.44$</td>
<td align="center">$3.47$</td>
<td align="center">$\le1$</td>
</tr>
<tr>
<td align="center">$\theta(^\circ)$</td>
<td align="center">$\gamma(^\circ)$</td>
<td align="center">$r_1(m)$</td>
<td align="center">$Q_1(m)$</td>
<td align="center">$r_2(m)$</td>
<td align="center">$Q_2(m)$</td>
<td align="center">$\tau(^\circ)$</td>
</tr>
<tr>
<td align="center">$11$</td>
<td align="center">$\ge 36$</td>
<td align="center">$0.6$</td>
<td align="center">$35000$</td>
<td align="center">$1.29$</td>
<td align="center">$61300$</td>
<td align="center">$7$</td>
</tr>
</tbody></table>
<br>

<table>
<thead>
<tr>
<th align="center">曲柄相对于初始位置转过的角度$(^\circ)$</th>
<th align="center">悬点载荷$W(N)$</th>
<th align="center">曲柄相对于初始位置转过的角度$(^\circ)$</th>
<th align="center">悬点载荷$W(N)$</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">58736</td>
<td align="center">190</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">60789</td>
<td align="center">200</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">20</td>
<td align="center">66140</td>
<td align="center">210</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">30</td>
<td align="center">74049</td>
<td align="center">220</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">40</td>
<td align="center">83539</td>
<td align="center">230</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">50</td>
<td align="center">93734</td>
<td align="center">240</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">60</td>
<td align="center">96316</td>
<td align="center">250</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">70</td>
<td align="center">92041</td>
<td align="center">2260</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">80</td>
<td align="center">88720</td>
<td align="center">270</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">90</td>
<td align="center">86353</td>
<td align="center">280</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">100</td>
<td align="center">84779</td>
<td align="center">290</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">110</td>
<td align="center">83764</td>
<td align="center">300</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">120</td>
<td align="center">83064</td>
<td align="center">310</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">130</td>
<td align="center">82443</td>
<td align="center">320</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">140</td>
<td align="center">81679</td>
<td align="center">330</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">150</td>
<td align="center">80545</td>
<td align="center">340</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">160</td>
<td align="center">78801</td>
<td align="center">350</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">170</td>
<td align="center">72217</td>
<td align="center">360</td>
<td align="center">68580</td>
</tr>
<tr>
<td align="center">180</td>
<td align="center">72700</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<br>

<h4 id="回到顶端"><a href="#回到顶端" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4><br>
<h2 id='2'></h2>

<h2 id="二、总体传动方案的设计"><a href="#二、总体传动方案的设计" class="headerlink" title="二、总体传动方案的设计"></a>二、总体传动方案的设计</h2><h3 id="2-1-传动比"><a href="#2-1-传动比" class="headerlink" title="2.1  传动比"></a>2.1  传动比</h3><p>&amp;emsp;&amp;emsp;由题可知，电机转速为$N_d&#x3D;980$转&#x2F;分，需将其转化为推油杆的低俗往复运动，冲次为$11$转&#x2F;分。</p>
<br>

<p><img src="/images/zatan/4/1-112.png" alt="1-112"></p>
<br>

<h3 id="2-2-设计图"><a href="#2-2-设计图" class="headerlink" title="2.2  设计图"></a>2.2  设计图</h3><br>

<p><img src="/images/zatan/4/1-12.png" alt="1-12"><br><br></p>
<p><img src="/images/zatan/4/1-13.png" alt="1-13"><br><br></p>
<p><img src="/images/zatan/4/1-15.png" alt="1-15"><br><br></p>
<p><img src="/images/zatan/4/1-14.png" alt="1-14"></p>
<br>

<h4 id="回到顶端-1"><a href="#回到顶端-1" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4><br>
<h2 id='3'></h2>

<h2 id="三、连杆机构的尺度综合"><a href="#三、连杆机构的尺度综合" class="headerlink" title="三、连杆机构的尺度综合"></a>三、连杆机构的尺度综合</h2><h3 id="3-1-建立模型"><a href="#3-1-建立模型" class="headerlink" title="3.1  建立模型"></a>3.1  建立模型</h3><p>由已知条件可以得出：<br><br></p>
<center>

<p>$k&#x3D;\sqrt{H^2+I^2}&#x3D;4.89$</p>
<br>

<br>


<p>$\psi&#x3D;\frac{S}{A}·\frac{180}{\pi}&#x3D;38.85^\circ$</p>
<br>

<br>


</center>

<p>在$\Delta{D_2D_1O_2}$中：</p>
<br>


<center>

<p>$cos\Phi_1&#x3D;\frac{2C^2-(D_1D_2)^2}{2C^2}$</p>
</center>


<br>


<p>在$\Delta{D_2D_1O_1}$中：</p>
<br>

<center>

<p>$cos\Phi_2&#x3D;\frac{(P+R)^2+(P-R)^2-D_1D_2}{2C^2}$</p>
</center>


<br>

<p>由上述两个式子化简得到:</p>
<br>


<center>

<p>${D_1D_2}^2&#x3D;(P+R)^2+(P-R)^2-2(P^2-R^2)cos\theta&#x3D;2C^2-2C^2(1-cos\theta)$</p>
</center>

<br>

<p>进一步化简得到：  </p>
<br>  


<center>

<p>$C&#x3D;\sqrt{\frac{P^2(1-cos\theta)-R^2(1+cos\theta)}{2sin^2{\frac{\theta}{2}}}}$</p>
<br>

<br>

<p>$P&#x3D;\begin{Bmatrix} \frac{K^2-R^2\begin{bmatrix}\frac{1+cos\theta}{2sin^2\frac{\psi}{2}}-\frac{sin\theta}{tan\frac{\psi}{2}}-cos\theta\end{bmatrix}}{\frac{1-cos\theta}{2sin^2\frac{\psi}{2}}+\frac{sin\theta}{tan\frac{\psi}{2}}+cos\theta}\end{Bmatrix}^\frac{1}{2}$</p>
</center>

<br>

<p>根据机构极限位置可以求出2个传动角公式：</p>
<br>


<center>

<p>$\gamma_1&#x3D;arccos(\frac{C^2+P^2-(K+R)^2}{2CP})$</p>
<br>

<br>


<p>$\gamma_2&#x3D;arccos(\frac{C^2+P^2-(K+R)^2}{2CP})$</p>
<br>

<br>


<p>$\gamma_m&#x3D;min(\gamma_1,\gamma_2)$</p>
<br>


<br>


</center>

<h3 id="3-2-迭代求值"><a href="#3-2-迭代求值" class="headerlink" title="3.2  迭代求值"></a>3.2  迭代求值</h3><center><img src="/images/zatan/4/1-21.png" width="100%" height="100%" align=center /></center>


<p>详细解析：</p>
<center><img src="/images/zatan/4/1-22.png" width="100%" height="100%" align=center /></center>

<br>

<p>由此可得出最优解：</p>
<p>$R&#x3D;1m,P&#x3D;3.558m,C&#x3D;2.6846m时,传动角最大为{39.314}^\circ$</p>
<br>
当$Si$取最大值和最小值时，曲柄得角度分别为：

<center>

<p>$\phi_1&#x3D;78^\circ$</p>
<br>

<br>

<p>$\phi_2&#x3D;247^\circ$</p>
</center>

<p>故，该机构要实现速降缓升需要将曲柄顺时针转动。  </p>
<br>

<h4 id="回到顶端-2"><a href="#回到顶端-2" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4><br>
<h2 id='4'></h2>

<h2 id="四、连杆机构运动分析"><a href="#四、连杆机构运动分析" class="headerlink" title="四、连杆机构运动分析"></a>四、连杆机构运动分析</h2><h3 id="4-1-建立模型"><a href="#4-1-建立模型" class="headerlink" title="4.1  建立模型"></a>4.1  建立模型</h3><p>&amp;emsp;&amp;emsp;首先求出$\theta_1$的初始位置，当摇杆运动到最低点时，曲柄，连杆在同一条直线上，在$\Delta O_1O_2D_2$与由$K、I、H$所组成的直角三角形中，可算出曲柄相对于水平线的角度，列出公式：  </p>
<br>

<center>



<p>$\theta_1&#x3D;arccos\frac{(P+R)^2+K^2-C^2}{2(P+R)^2K}+(90^\circ-arctan(\frac{H}{I}))$</p>
</center>

<br>

<p>可得 $\theta_1$的初始角为${78}^\circ$，在下图中，对其进行位置分析:</p>
<br>

<center>

<p>$\overrightarrow{P}&#x3D;\overrightarrow{K}+\overrightarrow{C}-\overrightarrow{R}$</p>
</center>

<br>


<center>

<p>$Psin\theta_2&#x3D;H+Csin\theta_3-Rsin\theta_1&#x3D;M$</p>
<br>


<br>

<p>$Pcos\theta_2&#x3D;I+Ccos\theta_3-Rcos\theta_1&#x3D;N$</p>
</center>

<br>



<p>联立可得：</p>
<br>


<center>

<p>$\omega_2&#x3D;\frac{\omega_1Rsin(\theta_1-\theta_3)}{Psin(\theta_3-\theta_2)}$</p>
<br>

<br>

<p>$\omega_3&#x3D;\frac{\omega_1Rsin(\theta_2-\theta_1)}{Csin(\theta_2-\theta_3)}$</p>
</center>



<br>

<p>求导;</p>
<br>

<center>


<p>$\alpha_3&#x3D;\frac{\omega_1Rcos(\theta_1-\theta_3)(\omega_2-\omega_1)sin(\theta_2-\theta_3)-sin(\theta_2-\theta_1)(\omega_2-\omega_3)cos(\theta_2-\theta_3)}{Psin(\theta_2-\theta_3)^2}$</p>
<br>

<br>

<p>$\alpha_2&#x3D;\frac{\omega_1Rcos(\theta_2-\theta_1)(\omega_1-\omega_3)sin(\theta_3-\theta_2)-sin(\theta_1-\theta_3)(\omega_3-\omega_2)cos(\theta_3-\theta_2)}{Psin(\theta_3-\theta_2)^2}$</p>
</center>

<br>

<h3 id="4-2-确定公式"><a href="#4-2-确定公式" class="headerlink" title="4.2  确定公式"></a>4.2  确定公式</h3><p>悬点位移：</p>
<br>

<center>

<p>$S_e&#x3D;A\times\psi$</p>
</center>

<br>

<p>悬点速度：</p>
<br>

<center>

<p>$V_e&#x3D;A\times\omega_3$</p>
</center>

<br>

<p>悬点加速度：</p>
<br>

<center>

<p>$\alpha_e&#x3D;A\times\alpha_3$</p>
</center>

<br>

<h3 id="4-3-编程绘图"><a href="#4-3-编程绘图" class="headerlink" title="4.3  编程绘图"></a>4.3  编程绘图</h3><p><img src="/images/zatan/4/1-31.png" alt="1-31"></p>
<p><img src="/images/zatan/4/1-32.png" alt="1-32"></p>
<p><img src="/images/zatan/4/1-33.png" alt="1-33"></p>
<br>

<h4 id="回到顶端-3"><a href="#回到顶端-3" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4><br>


<h2 id='5'></h2>

<h2 id="五、连杆机构动力分析"><a href="#五、连杆机构动力分析" class="headerlink" title="五、连杆机构动力分析"></a>五、连杆机构动力分析</h2><h3 id="5-1-建立模型"><a href="#5-1-建立模型" class="headerlink" title="5.1  建立模型"></a>5.1  建立模型</h3><p>在图中，分别对曲柄、连杆、油梁受力分析可以得到9个方程：</p>
<br>

<p>$\begin{cases} R_{21x}+R_{41x}&#x3D;0 \R_{21y}+R_{41y}&#x3D;0 \ T_N+Q_1r_1cos(\tau_1+\theta_1)+Q_2r_2cos(\tau_1+\theta_1)+R_{21x}Rsin\theta_1&#x3D;R_{21y}Rcos\theta_1 \end{cases}$</p>
<br>

<p>$\begin{cases} R_{21x}&#x3D;R_{32x}\R_{21y}&#x3D;R_{32y}\ R_{32y}Pcos\theta_2&#x3D;R_{32x}Psin\theta_2 \end{cases}$</p>
<br>

<p>$\begin{cases} R_{43x}&#x3D;R_{32x}\R_{43y}&#x3D;R_{32y}+W+Q_3\ AW&#x3D;R_{32y}Ccos\tau_3+R_{32x}Ctan\theta_3+Q_3r_3\end{cases}$</p>
<br>

<p>$T_W&#x3D;\frac{AW(tan\theta_2cos\theta_1-sin\theta_1)}{C(sin\theta_3-tan\theta_2cos\theta_3)}$</p>
<br>

<p>$T_Q&#x3D;cos(\tau_1+\theta_1)(Q_1r_1+Q_2r_2)$</p>
<br>

<p>$TN&#x3D;T_W-T_Q$</p>
<br>


<h3 id="5-2-程序绘图"><a href="#5-2-程序绘图" class="headerlink" title="5.2  程序绘图"></a>5.2  程序绘图</h3><p><img src="/images/zatan/4/1-41.png" alt="1-41"></p>
<br>


<center><img src="/images/zatan/4/1-42.png" width="100%" height="100%" align=center /></center>

<br>

<p>&amp;emsp;&amp;emsp;从上述表可以看出，净扭矩在${328}^\circ$左右时最大，最大约为$42.9417kN$，冲表格可得出净扭矩图线的曲线是等于载荷扭矩减去平衡扭矩曲线，说明三条曲线是符合$T_N&#x3D;T_w-T_Q$，所以，此图合理。</p>
<br>



<h4 id="回到顶端-4"><a href="#回到顶端-4" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4><br>

<h2 id='6'></h2>

<h2 id="六、附录"><a href="#六、附录" class="headerlink" title="六、附录"></a>六、附录</h2><h3 id="6-1-游梁式抽油机连杆机构尺度综合优选方法程序"><a href="#6-1-游梁式抽油机连杆机构尺度综合优选方法程序" class="headerlink" title="6.1  游梁式抽油机连杆机构尺度综合优选方法程序"></a>6.1  游梁式抽油机连杆机构尺度综合优选方法程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">%游梁式抽油机连杆机构尺度综合优选方法</span><br><span class="line"></span><br><span class="line">theta=11;</span><br><span class="line"></span><br><span class="line">k=sqrt(3.47^2+3.44^2);</span><br><span class="line"></span><br><span class="line">psi=rad2deg(2.94/3.65)</span><br><span class="line"></span><br><span class="line">r=0.8:0.01:1;</span><br><span class="line">a1=(1+cosd(theta))/(2*(sind(psi/2))^2);</span><br><span class="line">a2=sind(theta)/tand(psi/2);</span><br><span class="line">a3=(1-cosd(theta))/(2*(sind(psi/2))^2);</span><br><span class="line">a4=(sind(theta)/tand(psi/2));</span><br><span class="line"></span><br><span class="line">P=sqrt(abs((k^2-(a1-a2-cosd(theta))*r.^2)/(a3+a4+cosd(theta))));</span><br><span class="line">C=sqrt((P.^2*(1-cosd(theta))+r.^2*(1+cosd(theta)))/(2*(sind(psi/2))^2));</span><br><span class="line">b1=(k^2-(a1-a2-cosd(theta)));</span><br><span class="line">b2=(a3+a4+cosd(theta));</span><br><span class="line">b3=P.^2*(1-cosd(theta));</span><br><span class="line">b4=r.^2*(1+cosd(theta));</span><br><span class="line">b5=2*(sind(psi/2))^2;</span><br><span class="line"></span><br><span class="line">c1=k-r;</span><br><span class="line">c2=k+r;</span><br><span class="line">c3=(P.^2+C.^2-c1.^2)./(2.*P.*C);</span><br><span class="line">c4=(P.^2+C.^2-c2.^2)./(2.*P.*C);</span><br><span class="line">gamma1_1=acosd(c3(c3&gt;0));</span><br><span class="line">gamma1_2=180-acosd(c3(c3&lt;0));</span><br><span class="line">gamma1=[gamma1_2,gamma1_1];</span><br><span class="line"></span><br><span class="line">gamma2=180-acosd(c4);</span><br><span class="line">B=min(gamma1,gamma2);</span><br><span class="line">disp([&#x27;       R/m   &#x27;,&#x27;   P/m   &#x27;,&#x27;    C/m&#x27;,&#x27;    gamma_1&#x27;,&#x27;   gamma_2&#x27;,&#x27;    gamma_min&#x27;])</span><br><span class="line">A=[r;P;C;gamma1;gamma2;B]&#x27;</span><br></pre></td></tr></table></figure>



<h3 id="6-2-游梁式抽油机连杆机构运动分析优选方法程序"><a href="#6-2-游梁式抽油机连杆机构运动分析优选方法程序" class="headerlink" title="6.2  游梁式抽油机连杆机构运动分析优选方法程序"></a>6.2  游梁式抽油机连杆机构运动分析优选方法程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">format</span><br><span class="line">disp([&#x27;****************************************************************准备工作**************************************************************&#x27;])</span><br><span class="line">P=3.5580;</span><br><span class="line">C=2.6846;</span><br><span class="line">R=1;</span><br><span class="line">I=3.44;</span><br><span class="line">H=3.47;</span><br><span class="line">A=3.65;</span><br><span class="line">K=sqrt(I^2+H^2);</span><br><span class="line">phi2=acosd(I/K);%下机架角</span><br><span class="line">phi1=acosd(H/K);%上机架角</span><br><span class="line">disp([&#x27;     P&#x27;,&#x27;         C&#x27;,&#x27;         R&#x27;,&#x27;         I&#x27;,&#x27;          H&#x27;,&#x27;         A&#x27;,&#x27;         K&#x27;])</span><br><span class="line">[P;C;R;I;H;A;K]&#x27;</span><br><span class="line">%**********************************************</span><br><span class="line">a1=acosd(((P+R)^2+K^2-C^2)/(2*(P+R)*K));%死点角</span><br><span class="line">H1=(P+R)*sind(a1+phi2);</span><br><span class="line">H2=H1-H;</span><br><span class="line">a2=asind(H2/C);</span><br><span class="line">a=180-a2; %o2初始角</span><br><span class="line"></span><br><span class="line">b1=acosd(((P-R)^2+K^2-C^2)/(2*(P-R)*K));%死点角</span><br><span class="line">H3=(P-R)*sind(b1+phi2);</span><br><span class="line">H4=H-H3;</span><br><span class="line">b2=asind(H4/C);</span><br><span class="line">%末尾角</span><br><span class="line">b=180+b2;</span><br><span class="line">%*********************************************</span><br><span class="line"></span><br><span class="line">gamma_1=acosd((C^2+K^2-(R+P)^2)/(2*C*K));</span><br><span class="line">gamma_2=acosd((C^2+K^2-(P-R)^2)/(2*C*K));</span><br><span class="line">gamma=gamma_1-gamma_2;</span><br><span class="line">sigma1=a1+phi2;%主动杆死角1</span><br><span class="line">sigma2=180+phi2+b1 ;%主动杆死角2</span><br><span class="line">disp([&#x27;\theta1的两个特殊角：&#x27;])</span><br><span class="line">lambda1=[sigma1,sigma2]</span><br><span class="line"></span><br><span class="line">disp([&#x27;\theta3的角度（摆角）：&#x27;])</span><br><span class="line">psi=[a,b]</span><br><span class="line"></span><br><span class="line">disp([&#x27;****************************************************************计算结果****************************************************************&#x27;])</span><br><span class="line">%计算准备</span><br><span class="line">theta1=[78:1:438];</span><br><span class="line">omega1=deg2rad(66)%rad/s</span><br><span class="line">%************************************************************计算杆的角位移：</span><br><span class="line">e1=2*H*C-2*C*R*sind(theta1);</span><br><span class="line">e2=2*I*C-2*C*R*cosd(theta1);</span><br><span class="line">e3=P^2-K^2-C^2-R^2+2*H*R*sind(theta1)+2*I*R*cosd(theta1);</span><br><span class="line">theta3=2*atand((e1+sqrt(e1.^2+e2.^2-e3.^2))./(e2+e3));%deg</span><br><span class="line">theta3(theta3(:)&lt;0)=theta3((theta3(:)&lt;0))+360;</span><br><span class="line">theta2=asind((H+C*sind(theta3)-R*sind(theta1))/P);%deg</span><br><span class="line"></span><br><span class="line">%************************************************************计算杆的角速度：</span><br><span class="line">omega2=(omega1*R*sind(theta1-theta3))./(P*sind(theta2-theta3));%rads</span><br><span class="line">omega3=-(omega1*R*sind(theta1-theta2))./(P*sind(theta3-theta2));%rad/s</span><br><span class="line">F=[theta1;omega2;omega3]&#x27;;</span><br><span class="line">%**********************************************************计算杆的角加速度：</span><br><span class="line"></span><br><span class="line">f1=R.*omega1.^2.*sind(theta1)+P.*omega2.^2.*sind(theta2)-C.*omega3.^2.*sind(theta3);</span><br><span class="line">f2=R.*omega1.^2.*cosd(theta1)+P.*omega2.^2.*cosd(theta2)-C.*omega3.^2.*cosd(theta3);</span><br><span class="line">alpha2=(-(f2.*cosd(theta3)+f1.*sind(theta3))./(P.*sind(theta2-theta3)));</span><br><span class="line">alpha3=(-(f2.*cosd(theta2)+f1.*sind(theta2))./(C.*sind(theta2-theta3)));%rad/s^2theta2;omega2;alpha2;</span><br><span class="line">%******************************************************************求传动角</span><br><span class="line"></span><br><span class="line">g2=theta1-phi2;</span><br><span class="line">G2=sqrt(R^2+K^2-2*R*K.*cosd(g2));</span><br><span class="line">g3=acosd((P^2+C^2-G2.^2)./(2*P*C));</span><br><span class="line">g3(g3(:)&gt;90)=180-g3(g3(:)&gt;90);</span><br><span class="line">%******************************************************************整理结果：&#x27;   P角位移&#x27;,&#x27;   P角速度&#x27;,&#x27;  P角加速度&#x27;,</span><br><span class="line">Vi=A.*omega3;</span><br><span class="line">Ai=A.*alpha3;</span><br><span class="line">Si=deg2rad(theta3-a)*3.65;</span><br><span class="line">disp([&#x27;   R角位移&#x27;,&#x27;    C角位移&#x27;,&#x27;   C角速度&#x27;,&#x27;  C角加速度&#x27;,&#x27;  悬点位移&#x27;,&#x27;  悬点速度&#x27;,&#x27;  悬点加速度&#x27;,&#x27;  传动角&#x27;])</span><br><span class="line">E=[theta1;theta3;omega3;alpha3;Si;Vi;Ai;g3]&#x27;</span><br><span class="line"></span><br><span class="line">figure(1)</span><br><span class="line">plot(theta1,Si,&#x27;r&#x27;,theta1,Vi,&#x27;b&#x27;,theta1,Ai,&#x27;m&#x27;)</span><br><span class="line">axis([80,440,-2.5,3.5]);</span><br><span class="line">title(&#x27;抽油机--速度图、加速度、位移曲线&#x27;)</span><br><span class="line">text(260,3.2,&#x27;位移&#x27;)</span><br><span class="line">text(260,0.6,&#x27;速度&#x27;)</span><br><span class="line">text(260,-1.2,&#x27;加速度&#x27;)</span><br><span class="line">set(gca, &#x27;Xtick&#x27;,80:30:440)</span><br><span class="line">set(gca,&#x27;XDir&#x27;,&#x27;reverse&#x27;)</span><br><span class="line">set(gca,&#x27;Xticklabel&#x27;,&#123;&#x27;80\circ&#x27;,&#x27;110\circ&#x27;,&#x27;140\circ&#x27;,&#x27;170\circ&#x27;,&#x27;200\circ&#x27;,&#x27;230\circ&#x27;,&#x27;260\circ&#x27;,&#x27;290\circ&#x27;,&#x27;320\circ&#x27;,&#x27;350\circ&#x27;,&#x27;20\circ&#x27;,&#x27;50\circ&#x27;,&#x27;80\circ&#x27;,&#125;)</span><br><span class="line">grid on;</span><br><span class="line"></span><br><span class="line">figure(2)</span><br><span class="line">plot(theta1,g3)</span><br><span class="line">axis([80,440,35,90]);</span><br><span class="line">title(&#x27;传动角曲线&#x27;)</span><br><span class="line">text(290,70,&#x27;传动角&#x27;)</span><br><span class="line">set(gca, &#x27;Xtick&#x27;,80:30:440)</span><br><span class="line">set(gca,&#x27;XDir&#x27;,&#x27;reverse&#x27;)</span><br><span class="line">set(gca,&#x27;Xticklabel&#x27;,&#123;&#x27;80\circ&#x27;,&#x27;110\circ&#x27;,&#x27;140\circ&#x27;,&#x27;170\circ&#x27;,&#x27;200\circ&#x27;,&#x27;230\circ&#x27;,&#x27;260\circ&#x27;,&#x27;290\circ&#x27;,&#x27;320\circ&#x27;,&#x27;350\circ&#x27;,&#x27;20\circ&#x27;,&#x27;50\circ&#x27;,&#x27;80\circ&#x27;,&#125;)</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>


<h3 id="6-3-游梁式抽油机连杆机构动力分析优选方法程序"><a href="#6-3-游梁式抽油机连杆机构动力分析优选方法程序" class="headerlink" title="6.3  游梁式抽油机连杆机构动力分析优选方法程序"></a>6.3  游梁式抽油机连杆机构动力分析优选方法程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line">%**********************************************************************准备工作*********************************************************************************************</span><br><span class="line">a1=[78:10:428];%初始角度</span><br><span class="line">a2=[58.736 60.789 66.140 74.049 83.539 93.734 96.316 92.041 88.720 86.353 84.779 83.764 83.064 82.443 81.679 80.545 78.801 76.217 72.700 68.580 64.255 59.912 56.190 51.728 44.526 41.421 43.896 45.992 47.817 49.482 51.073 52.642 54.199 55.708 57.076 58.151];</span><br><span class="line">%悬梁载荷</span><br><span class="line">Q1=35;</span><br><span class="line">Q2=61.3;</span><br><span class="line">R1=0.6;</span><br><span class="line">R2=1.29;</span><br><span class="line">omega1=deg2rad(66);%rad/s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%**********************************************************************计算过程**********************************************************************************************</span><br><span class="line"></span><br><span class="line">Tn1=(a2.*3.65/2.6846).*sind(a1-90);</span><br><span class="line">Tn2=(Q1*R1+Q2*R2)*sind(a1-83);</span><br><span class="line">Tn=Tn2-Tn1;</span><br><span class="line">disp([&#x27;    偏转角&#x27;,&#x27;   载荷扭矩&#x27;,&#x27;   平衡扭矩&#x27;,&#x27;   净扭矩&#x27;])</span><br><span class="line">A=[a1;Tn1;Tn2;Tn]&#x27;</span><br><span class="line"></span><br><span class="line">plot(a1,Tn,&#x27;r&#x27;,a1,Tn1,&#x27;b&#x27;,a1,Tn2,&#x27;black&#x27;)</span><br><span class="line">xlabel(&#x27;曲柄角度/\circ&#x27;)</span><br><span class="line">ylabel(&#x27;力矩/KN&#x27;)</span><br><span class="line">text(260,100,&#x27;载荷扭矩&#x27;)</span><br><span class="line">text(200,80,&#x27;平衡扭矩&#x27;)</span><br><span class="line">text(200,-10,&#x27;净扭矩&#x27;)</span><br><span class="line">axis([78,428,-110,120]);</span><br><span class="line">set(gca,&#x27;XDir&#x27;,&#x27;reverse&#x27;)</span><br><span class="line">set(gca, &#x27;Xtick&#x27;,80:30:440)</span><br><span class="line">set(gca,&#x27;Xticklabel&#x27;,&#123;&#x27;80\circ&#x27;,&#x27;110\circ&#x27;,&#x27;140\circ&#x27;,&#x27;170\circ&#x27;,&#x27;200\circ&#x27;,&#x27;230\circ&#x27;,&#x27;260\circ&#x27;,&#x27;290\circ&#x27;,&#x27;320\circ&#x27;,&#x27;350\circ&#x27;,&#x27;20\circ&#x27;,&#x27;50\circ&#x27;,&#x27;80\circ&#x27;,&#125;)</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="回到顶端-5"><a href="#回到顶端-5" class="headerlink" title="回到顶端"></a><a href="#0">回到顶端</a></h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/24/Miscellaneous/chouyouji/" data-id="cl3qp641j0001z4qf5mk1adjw" data-title="曲柄平衡油梁式抽油机设计" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%BA%E6%A2%B0%E5%8E%9F%E7%90%86/" rel="tag">机械原理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%BA%E6%A2%B0%E8%AE%BE%E8%AE%A1/" rel="tag">机械设计</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-matlab/Matlab5" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/23/matlab/Matlab5/" class="article-date">
  <time class="dt-published" datetime="2021-06-23T14:51:36.000Z" itemprop="datePublished">2021-06-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/">数学建模</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/23/matlab/Matlab5/">Matlab随手记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1、将数组中小于某个值得数全部加上某个值："><a href="#1、将数组中小于某个值得数全部加上某个值：" class="headerlink" title="1、将数组中小于某个值得数全部加上某个值："></a>1、将数组中小于某个值得数全部加上某个值：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theta3(theta3(:)&lt;0)=theta3((theta3(:)&lt;0))+360</span><br></pre></td></tr></table></figure>
<br>

<h2 id="2、规定图像范围，改变x轴标记："><a href="#2、规定图像范围，改变x轴标记：" class="headerlink" title="2、规定图像范围，改变x轴标记："></a>2、规定图像范围，改变x轴标记：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axis([80,440,-2.5,3.5]);</span><br><span class="line">set(gca, &#x27;Xtick&#x27;,80:30:440)</span><br><span class="line">set(gca,&#x27;Xticklabel&#x27;,&#123;&#x27;80\circ&#x27;,&#x27;110\circ&#x27;,&#x27;140\circ&#x27;,&#x27;170\circ&#x27;,&#x27;200\circ&#x27;,&#x27;230\circ&#x27;,&#x27;260\circ&#x27;,&#x27;290\circ&#x27;,&#x27;320\circ&#x27;,&#x27;350\circ&#x27;,&#x27;20\circ&#x27;,&#x27;50\circ&#x27;,&#x27;80\circ&#x27;,&#125;)</span><br></pre></td></tr></table></figure>

<br>

<h2 id="3、将x作图曲线从大到小排列"><a href="#3、将x作图曲线从大到小排列" class="headerlink" title="3、将x作图曲线从大到小排列"></a>3、将x作图曲线从大到小排列</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set(gca,&#x27;XDir&#x27;,&#x27;reverse&#x27;)</span><br></pre></td></tr></table></figure>

<p><img src="/images/matlab/5/5-1.png" alt="5-1"></p>
<br>

<h2 id="4、取整函数"><a href="#4、取整函数" class="headerlink" title="4、取整函数"></a>4、取整函数</h2><p>&amp;emsp;&amp;emsp;· 1、fix(x):截尾取整；<br>&amp;emsp;&amp;emsp;· 2、floor(x):不超过x的最大整数；<br>&amp;emsp;&amp;emsp;· 3、ceil(x):不大于x的最小整数；<br>&amp;emsp;&amp;emsp;· 4、round(x):四舍五入取整； </p>
<br>

<h2 id="5、自动保存图片"><a href="#5、自动保存图片" class="headerlink" title="5、自动保存图片"></a>5、自动保存图片</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">for t=1:n</span><br><span class="line">        h=figure(t);</span><br><span class="line">        plot(Ci,Cj,&#x27;R*-&#x27;);</span><br><span class="line">        name=[&#x27;figure&#x27;,num2str(t),&#x27;.jpg&#x27;];</span><br><span class="line">        saveas(h,name);</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<br>

<h2 id="6、矩阵标准化"><a href="#6、矩阵标准化" class="headerlink" title="6、矩阵标准化"></a>6、矩阵标准化</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">a=xlsread(&#x27;D:\File\文档\MATLAB\A.xlsx&#x27;,&#x27;Sheet5&#x27;,&#x27;A1:D13&#x27;);</span><br><span class="line">[A,A_mean,A_std]=zscore(a)</span><br><span class="line">B=xlsread(&#x27;D:\File\文档\MATLAB\A.xlsx&#x27;,&#x27;Sheet4&#x27;,&#x27;A1:C4&#x27;)</span><br><span class="line">c=A*B;</span><br><span class="line">C=B&#x27;./A_std</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">syms X1 X2 X3 X4 F1 F2 F3</span><br><span class="line"></span><br><span class="line">F1=C(1,1)*(X1-A_mean(1))+C(1,2)*(X2-A_mean(2))+C(1,3)*(X3-A_mean(3))+C(1,4)*(X4-A_mean(4));</span><br><span class="line">F2=C(2,1)*(X1-A_mean(1))+C(2,2)*(X2-A_mean(2))+C(2,3)*(X3-A_mean(3))+C(2,4)*(X4-A_mean(4));</span><br><span class="line">F3=C(3,1)*(X1-A_mean(1))+C(3,2)*(X2-A_mean(2))+C(3,3)*(X3-A_mean(3))+C(3,4)*(X4-A_mean(4));</span><br><span class="line"></span><br><span class="line">y=95.423+9.883*F1+0.125*F2+4.555*F3;</span><br><span class="line"></span><br><span class="line">Y=vpa(y,4)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>A_mean</code> :&amp;ensp;均值    </li>
<li><code>A_std</code> :&amp;ensp;标准方差  </li>
<li><code>vpa</code>函数:<ul>
<li>1、控制精度，上述控制结果精度为4。  </li>
<li>2、求根，上述已知X &amp; F关系，将以F为自变量转换为以X为自变量。</li>
</ul>
</li>
</ul>
<br>

<h2 id="7、求元素在数组中出现的频率"><a href="#7、求元素在数组中出现的频率" class="headerlink" title="7、求元素在数组中出现的频率"></a>7、求元素在数组中出现的频率</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ID,A]=xlsread(&#x27;D:\File\微云同步\数学建模\4数据挖掘\processedfile.xlsx&#x27;)</span><br><span class="line">B1=tabulate(A(2:end,1))</span><br></pre></td></tr></table></figure>

<ul>
<li><code>tabulate</code> : &amp;ensp;求元素在数组中出现的频率</li>
</ul>
<p><img src="/images/matlab/5/5-2.png" alt="5-2"></p>
<br>

<h2 id="8、Matlab打开网页"><a href="#8、Matlab打开网页" class="headerlink" title="8、Matlab打开网页"></a>8、Matlab打开网页</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web browser tuoxiao.github.io</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/23/matlab/Matlab5/" data-id="cl3qp23pc000710qf2y04bvam" data-title="Matlab随手记" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Matlab%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">Matlab基础知识</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Mathematical_modeling/Matlab5" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/23/Mathematical_modeling/Matlab5/" class="article-date">
  <time class="dt-published" datetime="2021-06-23T14:51:36.000Z" itemprop="datePublished">2021-06-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/">数学建模</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/23/Mathematical_modeling/Matlab5/">Matlab随手记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1、将数组中小于某个值得数全部加上某个值："><a href="#1、将数组中小于某个值得数全部加上某个值：" class="headerlink" title="1、将数组中小于某个值得数全部加上某个值："></a>1、将数组中小于某个值得数全部加上某个值：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theta3(theta3(:)&lt;0)=theta3((theta3(:)&lt;0))+360</span><br></pre></td></tr></table></figure>
<br>

<h2 id="2、规定图像范围，改变x轴标记："><a href="#2、规定图像范围，改变x轴标记：" class="headerlink" title="2、规定图像范围，改变x轴标记："></a>2、规定图像范围，改变x轴标记：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axis([80,440,-2.5,3.5]);</span><br><span class="line">set(gca, &#x27;Xtick&#x27;,80:30:440)</span><br><span class="line">set(gca,&#x27;Xticklabel&#x27;,&#123;&#x27;80\circ&#x27;,&#x27;110\circ&#x27;,&#x27;140\circ&#x27;,&#x27;170\circ&#x27;,&#x27;200\circ&#x27;,&#x27;230\circ&#x27;,&#x27;260\circ&#x27;,&#x27;290\circ&#x27;,&#x27;320\circ&#x27;,&#x27;350\circ&#x27;,&#x27;20\circ&#x27;,&#x27;50\circ&#x27;,&#x27;80\circ&#x27;,&#125;)</span><br></pre></td></tr></table></figure>

<br>

<h2 id="3、将x作图曲线从大到小排列"><a href="#3、将x作图曲线从大到小排列" class="headerlink" title="3、将x作图曲线从大到小排列"></a>3、将x作图曲线从大到小排列</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set(gca,&#x27;XDir&#x27;,&#x27;reverse&#x27;)</span><br></pre></td></tr></table></figure>

<p><img src="/images/matlab/5/5-1.png" alt="5-1"></p>
<br>

<h2 id="4、取整函数"><a href="#4、取整函数" class="headerlink" title="4、取整函数"></a>4、取整函数</h2><p>&amp;emsp;&amp;emsp;· 1、fix(x):截尾取整；<br>&amp;emsp;&amp;emsp;· 2、floor(x):不超过x的最大整数；<br>&amp;emsp;&amp;emsp;· 3、ceil(x):不大于x的最小整数；<br>&amp;emsp;&amp;emsp;· 4、round(x):四舍五入取整； </p>
<br>

<h2 id="5、自动保存图片"><a href="#5、自动保存图片" class="headerlink" title="5、自动保存图片"></a>5、自动保存图片</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">for t=1:n</span><br><span class="line">        h=figure(t);</span><br><span class="line">        plot(Ci,Cj,&#x27;R*-&#x27;);</span><br><span class="line">        name=[&#x27;figure&#x27;,num2str(t),&#x27;.jpg&#x27;];</span><br><span class="line">        saveas(h,name);</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<br>

<h2 id="6、矩阵标准化"><a href="#6、矩阵标准化" class="headerlink" title="6、矩阵标准化"></a>6、矩阵标准化</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">a=xlsread(&#x27;D:\File\文档\MATLAB\A.xlsx&#x27;,&#x27;Sheet5&#x27;,&#x27;A1:D13&#x27;);</span><br><span class="line">[A,A_mean,A_std]=zscore(a)</span><br><span class="line">B=xlsread(&#x27;D:\File\文档\MATLAB\A.xlsx&#x27;,&#x27;Sheet4&#x27;,&#x27;A1:C4&#x27;)</span><br><span class="line">c=A*B;</span><br><span class="line">C=B&#x27;./A_std</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">syms X1 X2 X3 X4 F1 F2 F3</span><br><span class="line"></span><br><span class="line">F1=C(1,1)*(X1-A_mean(1))+C(1,2)*(X2-A_mean(2))+C(1,3)*(X3-A_mean(3))+C(1,4)*(X4-A_mean(4));</span><br><span class="line">F2=C(2,1)*(X1-A_mean(1))+C(2,2)*(X2-A_mean(2))+C(2,3)*(X3-A_mean(3))+C(2,4)*(X4-A_mean(4));</span><br><span class="line">F3=C(3,1)*(X1-A_mean(1))+C(3,2)*(X2-A_mean(2))+C(3,3)*(X3-A_mean(3))+C(3,4)*(X4-A_mean(4));</span><br><span class="line"></span><br><span class="line">y=95.423+9.883*F1+0.125*F2+4.555*F3;</span><br><span class="line"></span><br><span class="line">Y=vpa(y,4)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>A_mean</code> :&amp;ensp;均值    </li>
<li><code>A_std</code> :&amp;ensp;标准方差  </li>
<li><code>vpa</code>函数:<ul>
<li>1、控制精度，上述控制结果精度为4。  </li>
<li>2、求根，上述已知X &amp; F关系，将以F为自变量转换为以X为自变量。</li>
</ul>
</li>
</ul>
<br>

<h2 id="7、求元素在数组中出现的频率"><a href="#7、求元素在数组中出现的频率" class="headerlink" title="7、求元素在数组中出现的频率"></a>7、求元素在数组中出现的频率</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ID,A]=xlsread(&#x27;D:\File\微云同步\数学建模\4数据挖掘\processedfile.xlsx&#x27;)</span><br><span class="line">B1=tabulate(A(2:end,1))</span><br></pre></td></tr></table></figure>

<ul>
<li><code>tabulate</code> : &amp;ensp;求元素在数组中出现的频率</li>
</ul>
<p><img src="/images/matlab/5/5-2.png" alt="5-2"></p>
<br>

<h2 id="8、Matlab打开网页"><a href="#8、Matlab打开网页" class="headerlink" title="8、Matlab打开网页"></a>8、Matlab打开网页</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web browser tuoxiao.github.io</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/23/Mathematical_modeling/Matlab5/" data-id="cl3qp6421000qz4qf2i3l7h46" data-title="Matlab随手记" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Matlab%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">Matlab基础知识</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-matlab/montecarlo7" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/05/29/matlab/montecarlo7/" class="article-date">
  <time class="dt-published" datetime="2021-05-29T08:03:47.000Z" itemprop="datePublished">2021-05-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/">数学建模</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/05/29/matlab/montecarlo7/">MonteCarlo模拟</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>&amp;emsp;&amp;emsp;蒙特卡洛(MonteCarlo)是一种应用随机数来进行计算机模拟的方法。  </p>
<h2 id="Example1–利润计算"><a href="#Example1–利润计算" class="headerlink" title="Example1–利润计算"></a>Example1–利润计算</h2><p>&amp;emsp;&amp;emsp;已知一公司产品售价<code>150</code>元，初期研发成本<code>250000</code>元，单件原材料成本在<code>[50，80]</code>之间波动，市场需求符合正态分布<code>[12000,3000]</code>，单件人工成本成概率出现<code>[(52,0.05)(53,0.25)(54,0.4)(55,0.25)(56,0.05)]</code>。尝试计算公司亏损的概率。  </p>
<h3 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">profit=[];</span><br><span class="line">frequency=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:frequency</span><br><span class="line">    p=<span class="number">150</span>;  <span class="comment">%售价</span></span><br><span class="line">    a=<span class="number">250000</span>;   <span class="comment">%广告费</span></span><br><span class="line">    m=<span class="number">50</span>+(<span class="number">80</span><span class="number">-50</span>)*<span class="built_in">rand</span>;  <span class="comment">%原材料成本在50-80美元之间均匀分布</span></span><br><span class="line">    </span><br><span class="line">    r=normrnd(<span class="number">12000</span>,<span class="number">3000</span>);  <span class="comment">%符合正态分布</span></span><br><span class="line">    </span><br><span class="line">    alphabet=[<span class="number">52</span> <span class="number">53</span> <span class="number">54</span> <span class="number">55</span> <span class="number">56</span>];</span><br><span class="line">    prob=[<span class="number">0.05</span> <span class="number">0.25</span> <span class="number">0.4</span> <span class="number">0.25</span> <span class="number">0.05</span>];</span><br><span class="line">    l=randsrc(<span class="number">1</span>,<span class="number">1</span>,[alphabet;prob]);     <span class="comment">%此函数以‘prob’的概率输出‘alphabet’的值</span></span><br><span class="line">    </span><br><span class="line">    tp=(p-m-l)*r-a;</span><br><span class="line">    profit=[profit ;tp];    <span class="comment">%每运算一次，将上一次的计算结果带入矩阵中</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">me=<span class="built_in">mean</span>(profit);</span><br><span class="line">ma=<span class="built_in">max</span>(profit);</span><br><span class="line">mi=<span class="built_in">min</span>(profit);</span><br><span class="line">sg=std(profit);</span><br><span class="line">po=<span class="number">0</span>;</span><br><span class="line">ne=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">length</span>(profit)</span><br><span class="line">    <span class="keyword">if</span> profit(<span class="built_in">i</span>,<span class="number">1</span>)&lt;<span class="number">0</span>        <span class="comment">%遍历整个数列，数值小于1则记录1，得到亏损的概率</span></span><br><span class="line">        ne=ne+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">lo=ne/<span class="built_in">length</span>(profit)；  <span class="comment">%亏损的概率</span></span><br><span class="line">t=<span class="number">1</span>:frequency;</span><br><span class="line">T=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">plot</span>(t,profit,<span class="string">&#x27;r.&#x27;</span>,t,T,<span class="string">&#x27;black.&#x27;</span>)</span><br><span class="line"></span><br><span class="line">A=[me ma mi sg lo]</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;···me··&#x27;</span>,<span class="string">&#x27;··ma··&#x27;</span>,<span class="string">&#x27;··mi··&#x27;</span>,<span class="string">&#x27;··sg··&#x27;</span>,<span class="string">&#x27;··lo···&#x27;</span>])</span><br></pre></td></tr></table></figure>

<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="/images/matlab/7/7-1.png" alt="7-1"><br><img src="/images/matlab/7/7-2.png" alt="7-2"></p>
<h2 id="Exercise2–代替积分"><a href="#Exercise2–代替积分" class="headerlink" title="Exercise2–代替积分"></a>Exercise2–代替积分</h2><p>&amp;emsp;&amp;emsp;$y&#x3D;2x+1$,$x \in[0,10]$,求面积。  </p>
<h3 id="程序-1"><a href="#程序-1" class="headerlink" title="程序"></a>程序</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line"><span class="comment">%用ment carlo算法计算积分</span></span><br><span class="line"><span class="comment">%x[0,10]</span></span><br><span class="line"><span class="comment">%y[0,2x+1]</span></span><br><span class="line">M=<span class="number">21</span>;</span><br><span class="line">N=<span class="number">10</span>;</span><br><span class="line"><span class="built_in">j</span>=<span class="number">0</span>;</span><br><span class="line">p=[];</span><br><span class="line">q=[];</span><br><span class="line">frequency=<span class="number">20000</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:frequency</span><br><span class="line">    m=<span class="built_in">rand</span>*M;</span><br><span class="line">    n=<span class="built_in">rand</span>*N;</span><br><span class="line">    <span class="keyword">if</span> m&lt;(<span class="number">2</span>*n+<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">j</span>=<span class="built_in">j</span>+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    p=[p;m];</span><br><span class="line">    q=[q;n];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">s=<span class="built_in">j</span>/frequency</span><br><span class="line">S=s*M*N</span><br><span class="line"></span><br><span class="line">x=[<span class="number">0</span>:<span class="number">10</span>];</span><br><span class="line">y=<span class="number">2</span>*x+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">plot</span>(q,p,<span class="string">&#x27;r.&#x27;</span>,x,y,<span class="string">&#x27;black-&#x27;</span>)</span><br><span class="line">set(gca,<span class="string">&#x27;Ylim&#x27;</span>,[<span class="number">0</span>,<span class="number">21</span>])</span><br></pre></td></tr></table></figure>
<p><img src="/images/matlab/7/7-4.png" alt="7-4"><br><img src="/images/matlab/7/7-3.png" alt="7-3">  </p>
<h2 id="浦松投针问题"><a href="#浦松投针问题" class="headerlink" title="浦松投针问题"></a>浦松投针问题</h2><p>&amp;emsp;&amp;emsp;</p>
<h3 id="Example–程序"><a href="#Example–程序" class="headerlink" title="Example–程序"></a>Example–程序</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line"><span class="comment">%蒲丰投针实验的计算机模拟</span></span><br><span class="line">format long;                 <span class="comment">%设置15位显示精度</span></span><br><span class="line">a=<span class="number">1</span>;</span><br><span class="line">l=<span class="number">0.6</span>;                      <span class="comment">%两平行线间的宽度和针长</span></span><br><span class="line"><span class="built_in">figure</span>; axis([<span class="number">0</span>,<span class="built_in">pi</span>,<span class="number">0</span>,a/<span class="number">2</span>]); <span class="comment">%初始化绘图板</span></span><br><span class="line">set(gca,<span class="string">&#x27;nextplot&#x27;</span>,<span class="string">&#x27;add&#x27;</span>);  <span class="comment">%初始化绘图方式为叠加</span></span><br><span class="line">counter=<span class="number">0</span>;                  <span class="comment">%初始化计数器</span></span><br><span class="line">n=<span class="number">2000</span>;                     <span class="comment">%和设定投针次数</span></span><br><span class="line">x=unifrnd(<span class="number">0</span>,<span class="number">1</span>/<span class="number">2</span>,n,<span class="number">1</span>);       <span class="comment">%在[0,1/2]之间产生1*n阶矩阵</span></span><br><span class="line">phi=unifrnd(<span class="number">0</span>,<span class="built_in">pi</span>,<span class="number">1</span>,n);      <span class="comment">%样本空间Ω</span></span><br><span class="line">frame=moviein(n);           <span class="comment">%建立一个1120列的大矩阵</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:n</span><br><span class="line"><span class="keyword">if</span> x(<span class="built_in">i</span>)&lt;l*<span class="built_in">sin</span>(phi(<span class="built_in">i</span>))/<span class="number">2</span>  <span class="comment">%满足此条件表示针与线的相交</span></span><br><span class="line">    <span class="built_in">plot</span>(phi(<span class="built_in">i</span>),x(<span class="built_in">i</span>),<span class="string">&#x27;b.&#x27;</span>);</span><br><span class="line">    counter=counter+<span class="number">1</span>;    <span class="comment">%统计针与线相交的次数</span></span><br><span class="line">    frame(:,counter)=getframe; <span class="comment">%描点并取帧</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">fren=counter/n;</span><br><span class="line">pihat=<span class="number">2</span>*l/(a*fren);<span class="comment">%用频率近似计算π</span></span><br><span class="line"><span class="built_in">disp</span>(counter);</span><br><span class="line"><span class="built_in">disp</span>(pihat);</span><br></pre></td></tr></table></figure>

<p><img src="/images/matlab/7/7-7.png" alt="7-7"><br><img src="/images/matlab/7/7-8.png" alt="7-8"></p>
<h4 id="程序-2"><a href="#程序-2" class="headerlink" title="程序"></a>程序</h4><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line"><span class="comment">%普松投针--求圆周率</span></span><br><span class="line">h=<span class="number">1</span>;</span><br><span class="line">l=<span class="number">0.6</span>;</span><br><span class="line">n=<span class="number">10000</span>;</span><br><span class="line">x=unifrnd(<span class="number">0</span>,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">y=unifrnd(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,n,<span class="number">1</span>);</span><br><span class="line">X=[];</span><br><span class="line">Y=[];</span><br><span class="line">A=[];</span><br><span class="line">B=[];</span><br><span class="line"><span class="built_in">j</span>=<span class="number">0</span>;</span><br><span class="line"><span class="comment">%figure;</span></span><br><span class="line"><span class="comment">%axis([-0.5,1.5,-h,2]); %初始化绘图板</span></span><br><span class="line"><span class="comment">%set(gca,&#x27;nextplot&#x27;,&#x27;add&#x27;);  %初始化绘图方式为叠加</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:n</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>  x(<span class="built_in">i</span>)+l*<span class="built_in">sin</span>(y(<span class="built_in">i</span>))&gt;=h || x(<span class="built_in">i</span>)+l*<span class="built_in">sin</span>(y(<span class="built_in">i</span>))&lt;<span class="number">0</span> </span><br><span class="line">        <span class="built_in">j</span>=<span class="built_in">j</span>+<span class="number">1</span>;      </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    X=[X;x(<span class="built_in">i</span>)+l*<span class="built_in">cos</span>(y(<span class="built_in">i</span>))];</span><br><span class="line">    Y=[Y;x(<span class="built_in">i</span>)+l*<span class="built_in">sin</span>(y(<span class="built_in">i</span>))];</span><br><span class="line">    A=[A;x(<span class="built_in">i</span>),X(<span class="built_in">i</span>),Y(<span class="built_in">i</span>)];</span><br><span class="line">    <span class="comment">%plot([A(i,1),A(i,2)],[A(i,1),A(i,3)])</span></span><br><span class="line">    grid on;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">A;</span><br><span class="line">fre=<span class="built_in">j</span>/n</span><br><span class="line">pai=<span class="number">2</span>*l/(h*fre)</span><br></pre></td></tr></table></figure>

<h4 id="输出效果"><a href="#输出效果" class="headerlink" title="输出效果"></a>输出效果</h4><p><img src="/images/matlab/7/7-5.png" alt="7-5"><br><img src="/images/matlab/7/7-6.png" alt="7-6"> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/05/29/matlab/montecarlo7/" data-id="cl3qp23pm000s10qfdj3wgi9c" data-title="MonteCarlo模拟" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Mathematical_modeling/montecarlo7" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/05/29/Mathematical_modeling/montecarlo7/" class="article-date">
  <time class="dt-published" datetime="2021-05-29T08:03:47.000Z" itemprop="datePublished">2021-05-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/">数学建模</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/05/29/Mathematical_modeling/montecarlo7/">MonteCarlo模拟</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>&amp;emsp;&amp;emsp;蒙特卡洛(MonteCarlo)是一种应用随机数来进行计算机模拟的方法。  </p>
<h2 id="Example1–利润计算"><a href="#Example1–利润计算" class="headerlink" title="Example1–利润计算"></a>Example1–利润计算</h2><p>&amp;emsp;&amp;emsp;已知一公司产品售价<code>150</code>元，初期研发成本<code>250000</code>元，单件原材料成本在<code>[50，80]</code>之间波动，市场需求符合正态分布<code>[12000,3000]</code>，单件人工成本成概率出现<code>[(52,0.05)(53,0.25)(54,0.4)(55,0.25)(56,0.05)]</code>。尝试计算公司亏损的概率。  </p>
<h3 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">profit=[];</span><br><span class="line">frequency=1000;</span><br><span class="line">for i=1:frequency</span><br><span class="line">    p=150;  %售价</span><br><span class="line">    a=250000;   %广告费</span><br><span class="line">    m=50+(80-50)*rand;  %原材料成本在50-80美元之间均匀分布</span><br><span class="line">    </span><br><span class="line">    r=normrnd(12000,3000);  %符合正态分布</span><br><span class="line">    </span><br><span class="line">    alphabet=[52 53 54 55 56];</span><br><span class="line">    prob=[0.05 0.25 0.4 0.25 0.05];</span><br><span class="line">    l=randsrc(1,1,[alphabet;prob]);     %此函数以‘prob’的概率输出‘alphabet’的值</span><br><span class="line">    </span><br><span class="line">    tp=(p-m-l)*r-a;</span><br><span class="line">    profit=[profit ;tp];    %每运算一次，将上一次的计算结果带入矩阵中</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">me=mean(profit);</span><br><span class="line">ma=max(profit);</span><br><span class="line">mi=min(profit);</span><br><span class="line">sg=std(profit);</span><br><span class="line">po=0;</span><br><span class="line">ne=0;</span><br><span class="line"></span><br><span class="line">for i=1:length(profit)</span><br><span class="line">    if profit(i,1)&lt;0        %遍历整个数列，数值小于1则记录1，得到亏损的概率</span><br><span class="line">        ne=ne+1;</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line">lo=ne/length(profit)；  %亏损的概率</span><br><span class="line">t=1:frequency;</span><br><span class="line">T=0;</span><br><span class="line">plot(t,profit,&#x27;r.&#x27;,t,T,&#x27;black.&#x27;)</span><br><span class="line"></span><br><span class="line">A=[me ma mi sg lo]</span><br><span class="line">disp([&#x27;···me··&#x27;,&#x27;··ma··&#x27;,&#x27;··mi··&#x27;,&#x27;··sg··&#x27;,&#x27;··lo···&#x27;])</span><br></pre></td></tr></table></figure>

<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="/images/matlab/7/7-1.png" alt="7-1"><br><img src="/images/matlab/7/7-2.png" alt="7-2"></p>
<h2 id="Exercise2–代替积分"><a href="#Exercise2–代替积分" class="headerlink" title="Exercise2–代替积分"></a>Exercise2–代替积分</h2><p>&amp;emsp;&amp;emsp;$y&#x3D;2x+1$,$x \in[0,10]$,求面积。  </p>
<h3 id="程序-1"><a href="#程序-1" class="headerlink" title="程序"></a>程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">%用ment carlo算法计算积分</span><br><span class="line">%x[0,10]</span><br><span class="line">%y[0,2x+1]</span><br><span class="line">M=21;</span><br><span class="line">N=10;</span><br><span class="line">j=0;</span><br><span class="line">p=[];</span><br><span class="line">q=[];</span><br><span class="line">frequency=20000;</span><br><span class="line">for i=1:frequency</span><br><span class="line">    m=rand*M;</span><br><span class="line">    n=rand*N;</span><br><span class="line">    if m&lt;(2*n+1)</span><br><span class="line">        j=j+1;</span><br><span class="line">    end</span><br><span class="line">    p=[p;m];</span><br><span class="line">    q=[q;n];</span><br><span class="line">end</span><br><span class="line">s=j/frequency</span><br><span class="line">S=s*M*N</span><br><span class="line"></span><br><span class="line">x=[0:10];</span><br><span class="line">y=2*x+1;</span><br><span class="line"></span><br><span class="line">plot(q,p,&#x27;r.&#x27;,x,y,&#x27;black-&#x27;)</span><br><span class="line">set(gca,&#x27;Ylim&#x27;,[0,21])</span><br></pre></td></tr></table></figure>
<p><img src="/images/matlab/7/7-4.png" alt="7-4"><br><img src="/images/matlab/7/7-3.png" alt="7-3">  </p>
<h2 id="浦松投针问题"><a href="#浦松投针问题" class="headerlink" title="浦松投针问题"></a>浦松投针问题</h2><p>&amp;emsp;&amp;emsp;</p>
<h3 id="Example–程序"><a href="#Example–程序" class="headerlink" title="Example–程序"></a>Example–程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">%蒲丰投针实验的计算机模拟</span><br><span class="line">format long;                 %设置15位显示精度</span><br><span class="line">a=1;</span><br><span class="line">l=0.6;                      %两平行线间的宽度和针长</span><br><span class="line">figure; axis([0,pi,0,a/2]); %初始化绘图板</span><br><span class="line">set(gca,&#x27;nextplot&#x27;,&#x27;add&#x27;);  %初始化绘图方式为叠加</span><br><span class="line">counter=0;                  %初始化计数器</span><br><span class="line">n=2000;                     %和设定投针次数</span><br><span class="line">x=unifrnd(0,1/2,n,1);       %在[0,1/2]之间产生1*n阶矩阵</span><br><span class="line">phi=unifrnd(0,pi,1,n);      %样本空间Ω</span><br><span class="line">frame=moviein(n);           %建立一个1120列的大矩阵</span><br><span class="line">for i=1:n</span><br><span class="line">if x(i)&lt;l*sin(phi(i))/2  %满足此条件表示针与线的相交</span><br><span class="line">    plot(phi(i),x(i),&#x27;b.&#x27;);</span><br><span class="line">    counter=counter+1;    %统计针与线相交的次数</span><br><span class="line">    frame(:,counter)=getframe; %描点并取帧</span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">fren=counter/n;</span><br><span class="line">pihat=2*l/(a*fren);%用频率近似计算π</span><br><span class="line">disp(counter);</span><br><span class="line">disp(pihat);</span><br></pre></td></tr></table></figure>

<p><img src="/images/matlab/7/7-7.png" alt="7-7"><br><img src="/images/matlab/7/7-8.png" alt="7-8"></p>
<h4 id="程序-2"><a href="#程序-2" class="headerlink" title="程序"></a>程序</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br><span class="line">clc</span><br><span class="line">%普松投针--求圆周率</span><br><span class="line">h=1;</span><br><span class="line">l=0.6;</span><br><span class="line">n=10000;</span><br><span class="line">x=unifrnd(0,1,n,1);</span><br><span class="line">y=unifrnd(0,2*pi,n,1);</span><br><span class="line">X=[];</span><br><span class="line">Y=[];</span><br><span class="line">A=[];</span><br><span class="line">B=[];</span><br><span class="line">j=0;</span><br><span class="line">%figure;</span><br><span class="line">%axis([-0.5,1.5,-h,2]); %初始化绘图板</span><br><span class="line">%set(gca,&#x27;nextplot&#x27;,&#x27;add&#x27;);  %初始化绘图方式为叠加</span><br><span class="line">for i=1:n</span><br><span class="line">    </span><br><span class="line">    if  x(i)+l*sin(y(i))&gt;=h || x(i)+l*sin(y(i))&lt;0 </span><br><span class="line">        j=j+1;      </span><br><span class="line">    end</span><br><span class="line">    X=[X;x(i)+l*cos(y(i))];</span><br><span class="line">    Y=[Y;x(i)+l*sin(y(i))];</span><br><span class="line">    A=[A;x(i),X(i),Y(i)];</span><br><span class="line">    %plot([A(i,1),A(i,2)],[A(i,1),A(i,3)])</span><br><span class="line">    grid on;</span><br><span class="line">end</span><br><span class="line">A;</span><br><span class="line">fre=j/n</span><br><span class="line">pai=2*l/(h*fre)</span><br></pre></td></tr></table></figure>

<h4 id="输出效果"><a href="#输出效果" class="headerlink" title="输出效果"></a>输出效果</h4><p><img src="/images/matlab/7/7-5.png" alt="7-5"><br><img src="/images/matlab/7/7-6.png" alt="7-6"> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/05/29/Mathematical_modeling/montecarlo7/" data-id="cl3qp64250012z4qfh464g16b" data-title="MonteCarlo模拟" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/">数学建模</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Arduino/" rel="tag">Arduino</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/" rel="tag">Github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lingo%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/" rel="tag">Lingo案例分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Math/" rel="tag">Math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Matlab%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">Matlab基础知识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/" rel="tag">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matlab%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">matlab基础知识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matlab%E5%BA%94%E7%94%A8/" rel="tag">matlab应用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matlab%E7%A8%8B%E5%BA%8F/" rel="tag">matlab程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matlab%E7%BB%98%E5%9B%BE/" rel="tag">matlab绘图</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%95%E7%89%87%E6%9C%BA/" rel="tag">单片机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B/" rel="tag">微分方程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E6%A2%B0%E5%8E%9F%E7%90%86/" rel="tag">机械原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E6%A2%B0%E8%AE%BE%E8%AE%A1/" rel="tag">机械设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%A9%E6%9C%BA/" rel="tag">玩机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BA%E6%96%87%E6%8E%92%E7%89%88/" rel="tag">论文排版</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%AD%E6%B3%95/" rel="tag">语法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95/" rel="tag">遗传算法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Arduino/" style="font-size: 12.5px;">Arduino</a> <a href="/tags/Git/" style="font-size: 12.5px;">Git</a> <a href="/tags/Github/" style="font-size: 20px;">Github</a> <a href="/tags/Hexo/" style="font-size: 20px;">Hexo</a> <a href="/tags/Lingo%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/" style="font-size: 12.5px;">Lingo案例分析</a> <a href="/tags/Math/" style="font-size: 12.5px;">Math</a> <a href="/tags/Matlab%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 12.5px;">Matlab基础知识</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/markdown/" style="font-size: 12.5px;">markdown</a> <a href="/tags/matlab%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 12.5px;">matlab基础知识</a> <a href="/tags/matlab%E5%BA%94%E7%94%A8/" style="font-size: 17.5px;">matlab应用</a> <a href="/tags/matlab%E7%A8%8B%E5%BA%8F/" style="font-size: 12.5px;">matlab程序</a> <a href="/tags/matlab%E7%BB%98%E5%9B%BE/" style="font-size: 12.5px;">matlab绘图</a> <a href="/tags/%E5%8D%95%E7%89%87%E6%9C%BA/" style="font-size: 12.5px;">单片机</a> <a href="/tags/%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B/" style="font-size: 12.5px;">微分方程</a> <a href="/tags/%E6%9C%BA%E6%A2%B0%E5%8E%9F%E7%90%86/" style="font-size: 20px;">机械原理</a> <a href="/tags/%E6%9C%BA%E6%A2%B0%E8%AE%BE%E8%AE%A1/" style="font-size: 12.5px;">机械设计</a> <a href="/tags/%E7%8E%A9%E6%9C%BA/" style="font-size: 12.5px;">玩机</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15px;">算法</a> <a href="/tags/%E8%AE%BA%E6%96%87%E6%8E%92%E7%89%88/" style="font-size: 12.5px;">论文排版</a> <a href="/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 12.5px;">语法</a> <a href="/tags/%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95/" style="font-size: 10px;">遗传算法</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/05/29/Learn/math/">Mathjax渲染公式</a>
          </li>
        
          <li>
            <a href="/2022/05/29/%E5%AD%A6%E4%B9%A0/math/">Mathjax渲染公式</a>
          </li>
        
          <li>
            <a href="/2022/05/29/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/08/24/Mathematical_modeling/11GA/">Genetic Algorithm</a>
          </li>
        
          <li>
            <a href="/2021/08/15/Mathematical_modeling/10matlab/">Matlab微分方程</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>